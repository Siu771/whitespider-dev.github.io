/*! For license information please see out.js.LICENSE.txt */
https://nettleweb.com/


/*! Copyright (C) 2024 nettleweb.com; All rights reserved. !*/
"use strict";

(()=>{function e(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function t(){return new TransformStream({transform(t,n){!function(t,n){St&&t.data instanceof Blob?t.data.arrayBuffer().then(e).then(n):jt&&(t.data instanceof ArrayBuffer||Lt(t.data))?n(e(t.data)):It(t,!1,(e=>{Dt||(Dt=new TextEncoder),n(Dt.encode(e))}))}(t,(e=>{const r=e.length;let o;if(r<126)o=new Uint8Array(1),
new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const e=new DataView(o.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{o=new Uint8Array(9);const e=new DataView(o.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}t.data&&"string"!=typeof t.data&&(o[0]|=128),n.enqueue(o),n.enqueue(e)}))}})}function n(e){return e.reduce(((e,t)=>e+t.length),0)}function r(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],
r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}function i(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}function s(e,t){t.useNativeTimers?(e.setTimeoutFn=$t.bind(zt),e.clearTimeoutFn=Vt.bind(zt)):(e.setTimeoutFn=zt.setTimeout.bind(zt),e.clearTimeoutFn=zt.clearTimeout.bind(zt))}function a(){
return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function c(){}function l(){for(let e in Xt.requests)Xt.requests.hasOwnProperty(e)&&Xt.requests[e].abort()}function d(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Jt))return new XMLHttpRequest}catch(e){}if(!t)try{return new(zt[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function u(e){if(e.length>8e3)throw"URI too long"
;const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=rn.exec(e||""),i={},s=14;for(;s--;)i[on[s]]=o[s]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/")
;return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}function h(e){return un&&(e instanceof ArrayBuffer||hn(e))||fn&&e instanceof Blob||mn&&e instanceof File}function p(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(p(e[t]))return!0;return!1}if(h(e))return!0
;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return p(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&p(e[t]))return!0;return!1}function f(e){const t=[],n=e.data,r=e;return r.data=m(n,t),r.attachments=t.length,{packet:r,buffers:t}}function m(e,t){if(!e)return e;if(h(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=m(e[r],t);return n}
if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=m(e[r],t));return n}return e}function g(e,t){return e.data=b(e.data,t),delete e.attachments,e}function b(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw Error("illegal attachments")}
if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=b(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=b(e[n],t));return e}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e,t,n){return e.on(t,n),function(){e.off(t,n)}}function w(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function k(e,t){"object"==typeof e&&(t=e,
e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=u(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host
;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,o=n.id,i=n.path,s=Tn[o]&&i in Tn[o].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new _n(r,t):(Tn[o]||(Tn[o]=new _n(r,t)),a=Tn[o]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}function E(){try{return"object"==typeof indexedDB}catch(e){return!1}}function C(){return new Promise(((e,t)=>{try{let n=!0
;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function _(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(T(n)&&T(i)){if(!_(n,i))return!1}else if(n!==i)return!1}
for(const e of r)if(!n.includes(e))return!1;return!0}function T(e){return null!==e&&"object"==typeof e}function A(e,t=Rn,n=Un){const r=t*Math.pow(n,e),o=Math.round(Hn*r*(Math.random()-.5)*2);return Math.min(Fn,r+o)}function x(e){return e&&e._delegate?e._delegate:e}function S(e){
return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tr||(tr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(cr(this),t),L(nr.get(this))}:function(...t){return L(e.apply(cr(this),t))}:function(t,...n){const r=e.call(cr(this),t,...n);return or.set(r,t.sort?t.sort():[t]),L(r)}}function j(e){return"function"==typeof e?S(e):(e instanceof IDBTransaction&&function(e){
if(rr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));rr.set(e,t)}(e),Qn(e,er||(er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ar):e)}function L(e){
if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(L(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&nr.set(t,e)})).catch((()=>{})),sr.set(t,e),t}(e);if(ir.has(e))return ir.get(e);const t=j(e);return t!==e&&(ir.set(e,t),sr.set(t,e)),t}
function I(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=L(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(L(s.result),e.oldVersion,e.newVersion,L(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function O(e,t){
if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ur.get(t))return ur.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=dr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!lr.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return ur.set(t,i),i}function D(e,t){try{e.container.addComponent(t)}catch(n){
gr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function M(e){const t=e.name;if(Gr.has(t))return gr.debug(`There were multiple attempts to register component ${t}.`),!1;Gr.set(t,e);for(const t of qr.values())D(t,e);for(const t of Wr.values())D(t,e);return!0}function P(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function B(e,t={}){let n=e;"object"!=typeof t&&(t={name:t})
;const r=Object.assign({name:$r,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!=typeof o||!o)throw Kr.create("bad-app-name",{appName:o+""});if(n||(n=Dn()),!n)throw Kr.create("no-options");const i=qr.get(o);if(i){if(_(n,i.options)&&_(r,i.config))return i;throw Kr.create("duplicate-app",{appName:o})}const s=new qn(o);for(const e of Gr.values())s.addComponent(e);const a=new Jr(n,r,s);return qr.set(o,a),a}function N(e,t,n){var r;let o=null!==(r=Vr[e])&&void 0!==r?r:e;n&&(o+="-"+n)
;const i=o.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${o}" with version "${t}":`];return i&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void gr.warn(e.join(" "))}M(new zn(o+"-version",(()=>({library:o,version:t})),"VERSION"))}function R(){return Qr||(Qr=I(Yr,Xr,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Zr)}catch(e){}
}}).catch((e=>{throw Kr.create("idb-open",{originalErrorMessage:e.message})}))),Qr}async function U(e,t){try{const n=(await R()).transaction(Zr,"readwrite"),r=n.objectStore(Zr);await r.put(t,F(e)),await n.done}catch(e){if(e instanceof Pn)gr.warn(e.message);else{const t=Kr.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});gr.warn(t.message)}}}function F(e){return`${e.name}!${e.options.appId}`}function H(){return(new Date).toISOString().substring(0,10)}function z(e){
return jn(JSON.stringify({version:2,heartbeats:e})).length}function $(e){return e instanceof Pn&&e.code.includes("request-failed")}function V({projectId:e}){return`${co}/projects/${e}/installations`}function q(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function W(e,t){const n=(await t.json()).error;return uo.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,
serverStatus:n.status})}function G({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function K(e,{refreshToken:t}){const n=G(e);return n.append("Authorization",function(e){return`${ao} ${e}`}(t)),n}async function J(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Y(e){return new Promise((t=>{setTimeout(t,e)}))}function X(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),
e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return ho.test(t)?t:po}catch(e){return po}}function Z(e){return`${e.appName}!${e.appId}`}function Q(e,t){const n=Z(e);ee(n,t),function(e,t){const n=te();n&&n.postMessage({key:e,fid:t}),ne()}(n,t)}function ee(e,t){const n=fo.get(e);if(n)for(const e of n)e(t)}function te(){
return!mo&&"BroadcastChannel"in self&&(mo=new BroadcastChannel("[Firebase] FID Change"),mo.onmessage=e=>{ee(e.data.key,e.data.fid)}),mo}function ne(){0===fo.size&&mo&&(mo.close(),mo=null)}function re(){return vo||(vo=I(go,bo,{upgrade:(e,t)=>{0===t&&e.createObjectStore(yo)}})),vo}async function oe(e,t){const n=Z(e),r=(await re()).transaction(yo,"readwrite"),o=r.objectStore(yo),i=await o.get(n);return await o.put(t,n),await r.done,i&&i.fid===t.fid||Q(e,t.fid),t}async function ie(e){
const t=Z(e),n=(await re()).transaction(yo,"readwrite");await n.objectStore(yo).delete(t),await n.done}async function se(e,t){const n=Z(e),r=(await re()).transaction(yo,"readwrite"),o=r.objectStore(yo),i=await o.get(n),s=t(i);return void 0===s?await o.delete(n):await o.put(s,n),await r.done,!s||i&&i.fid===s.fid||Q(e,s.fid),s}async function ae(e){let t;const n=await se(e.appConfig,(n=>{const r=function(e){const t=e||{fid:X(),registrationStatus:0};return de(t)}(n),o=function(e,t){
if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(uo.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=V(e),o=G(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={fid:n,authVersion:ao,appId:e.appId,
sdkVersion:so},a={method:"POST",headers:o,body:JSON.stringify(s)},c=await J((()=>fetch(r,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:q(e.authToken)}}throw await W("Create Installation",c)}(e,t);return oe(e.appConfig,n)}catch(n){throw $(n)&&409===n.customData.serverCode?await ie(e.appConfig):await oe(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}
return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ce(e)}:{installationEntry:t}}(e,r);return t=o.registrationPromise,o.installationEntry}));return n.fid===po?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ce(e){let t=await le(e.appConfig);for(;1===t.registrationStatus;)await Y(100),t=await le(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ae(e);return n||t}return t}function le(e){
return se(e,(e=>{if(!e)throw uo.create("installation-not-found");return de(e)}))}function de(e){return 1===(t=e).registrationStatus&&t.registrationTime+io<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ue({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${V(e)}/${t}/authTokens:generate`}(e,n),o=K(e,n),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{
sdkVersion:so,appId:e.appId}},a={method:"POST",headers:o,body:JSON.stringify(s)},c=await J((()=>fetch(r,a)));if(c.ok)return q(await c.json());throw await W("Generate Auth Token",c)}async function he(e,t=!1){let n;const r=await se(e.appConfig,(r=>{if(!fe(r))throw uo.create("not-registered");const o=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+lo}(e)}(o))return r
;if(1===o.requestStatus)return n=async function(e,t){let n=await pe(e.appConfig);for(;1===n.authToken.requestStatus;)await Y(100),n=await pe(e.appConfig);const r=n.authToken;return 0===r.requestStatus?he(e,t):r}(e,t),r;{if(!navigator.onLine)throw uo.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await ue(e,t),r=Object.assign(Object.assign({},t),{
authToken:n});return await oe(e.appConfig,r),n}catch(n){if(!$(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await oe(e.appConfig,n)}else await ie(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function pe(e){return se(e,(e=>{if(!fe(e))throw uo.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+io<Date.now()?Object.assign(Object.assign({},e),{
authToken:{requestStatus:0}}):e;var n}))}function fe(e){return void 0!==e&&2===e.registrationStatus}async function me(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await ae(e);t&&await t}(n),(await he(n,t)).token}function ge(e){return uo.create("missing-app-config-values",{valueName:e})}function be(e){if(!e.startsWith(xo)){const t=jo.create("invalid-gtag-resource",{gtagURL:e});return So.warn(t.message),""}return e}function ye(e){
return Promise.all(e.map((e=>e.catch((e=>e)))))}function ve(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:be}),r=document.createElement("script"),o=`${xo}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function we(e,t,n,r){return async function(o,...i){try{if("event"===o){const[r,o]=i;await async function(e,t,n,r,o){try{let i=[]
;if(o&&o.send_to){let e=o.send_to;Array.isArray(e)||(e=[e]);const r=await ye(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),o=e&&t[e.appId];if(!o){i=[];break}i.push(o)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,o||{})}catch(e){So.error(e)}}(e,t,n,r,o)}else if("config"===o){const[o,s]=i;await async function(e,t,n,r,o,i){const s=r[o];try{if(s)await t[s];else{const e=(await ye(n)).find((e=>e.measurementId===o));e&&await t[e.appId]}}catch(e){So.error(e)}
e("config",o,i)}(e,t,n,r,o,s)}else if("consent"===o){const[t,n]=i;e("consent",t,n)}else if("get"===o){const[t,n,r]=i;e("get",t,n,r)}else if("set"===o){const[t]=i;e("set",t)}else e(o,...i)}catch(e){So.error(e)}}}function ke(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ee(e,t=Io,n){const{appId:r,apiKey:o,measurementId:i}=e.options;if(!r)throw jo.create("no-app-id");if(!o){if(i)return{measurementId:i,appId:r};throw jo.create("no-api-key")}
const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Oo;return setTimeout((async()=>{a.abort()}),void 0!==n?n:To),Ce({appId:r,apiKey:o,measurementId:i},s,a,t)}async function Ce(e,{throttleEndTimeMillis:t,backoffCount:n},r,o=Io){var i;const{appId:s,measurementId:a}=e;try{await function(e,t){return new Promise(((n,r)=>{const o=Math.max(t-Date.now(),0),i=setTimeout(n,o);e.addEventListener((()=>{clearTimeout(i),r(jo.create("fetch-throttle",{
throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(a)return So.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:s,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,o={method:"GET",headers:ke(r)},i=Ao.replace("{app-id}",n),s=await fetch(i,o);if(200!==s.status&&304!==s.status){
let e="";try{const n=await s.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw jo.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return o.deleteThrottleMetadata(s),t}catch(t){const c=t;if(!function(e){if(!(e instanceof Pn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(o.deleteThrottleMetadata(s),
a)return So.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:s,measurementId:a};throw t}const l=503===Number(null===(i=null==c?void 0:c.customData)||void 0===i?void 0:i.httpStatus)?A(n,o.intervalMillis,Lo):A(n,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return o.setThrottleMetadata(s,d),
So.debug(`Calling attemptFetch again in ${l} millis`),Ce(e,d,r,o)}}function _e(e){Mo=e}function Te(e){Do=e}async function Ae(e,t,n,r,o,i,s){var a;const c=Ee(e);c.then((t=>{n[t.measurementId]=t.appId,
e.options.measurementId&&t.measurementId!==e.options.measurementId&&So.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>So.error(e))),t.push(c);const l=async function(){
if(!E())return So.warn(jo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await C()}catch(e){return So.warn(jo.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,u]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(xo)&&n.src.includes(e))return n;return null
})(i)||ve(i,d.measurementId),Mo&&(o("consent","default",Mo),_e(void 0)),o("js",new Date);const h=null!==(a=null==s?void 0:s.config)&&void 0!==a?a:{};return h[_o]="firebase",h.update=!0,null!=u&&(h[Co]=u),o("config",d.measurementId,h),Do&&(o("set",Do),Te(void 0)),d.measurementId}function xe(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id
}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=jo.create("invalid-analytics-context",{errorInfo:t});So.warn(n.message)}}function Se(e,t,n){xe();const r=e.options.appId;if(!r)throw jo.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw jo.create("no-api-key")
;So.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Bo[r])throw jo.create("already-exists",{id:r});if(!$o){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ho);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,o){let i=function(){
window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(i=window[o]),window[o]=we(i,e,t,n),{gtagCore:i,wrappedGtag:window[o]}}(Bo,No,Ro,Ho,zo);Fo=e,Uo=t,$o=!0}return Bo[r]=Ae(e,No,Ro,t,Uo,Ho,n),new Po(e)}function je(e=function(e=$r){const t=qr.get(e);if(!t&&e===$r&&Dn())return B();if(!t)throw Kr.create("no-app",{appName:e});return t}()){const t=P(e=x(e),Eo);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=P(e,Eo);if(n.isInitialized()){
const e=n.getImmediate();if(_(t,n.getOptions()))return e;throw jo.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}function Le(e,t,n,r){e=x(e),async function(e,t,n,r,o){if(o&&o.global)e("event",n,r);else{const o=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}}(Fo,Bo[e.app.options.appId],t,n,r).catch((e=>So.error(e)))}function Ie(e){let t=0,n="";for(;t<e.byteLength;){const r=e[t];if(128&r)if(192==(224&r)){const o=e[t+1]
;n+=String.fromCharCode((31&r)<<6|63&o),t+=2}else if(224==(240&r)){const o=e[t+1],i=e[t+2];n+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),t+=3}else if(240==(248&r)){const o=(7&r)<<18|(63&e[t+1])<<12|(63&e[t+2])<<6|63&e[t+3];n+=o<=1114111?String.fromCodePoint(o):"\ufffd",t+=4}else n+="\ufffd",t+=1;else n+=String.fromCharCode(r),t+=1}return n}function Oe(e){try{return new DataView(e,0,0),!0}catch(e){return!1}}function De(e,t){const n=function(e){const t=[]
;for(const n of Array.from(e,(e=>e.codePointAt(0)||0)))n<=127?t.push(n):n<=2047?(t.push(n>>6|192),t.push(63&n|128)):n<=65535?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n<=1114111&&(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128));return Uint8Array.from(t)}(t),r=new DataView(new ArrayBuffer(4),0,4);r.setUint32(0,n.byteLength,!0),e.write(r),e.write(n)}function Me(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,102),
n.setUint32(1,t.byteLength,!0),e.write(n),e.write(t)}function Pe(e,t){switch(typeof t){case"string":e.write(101),De(e,t);break;case"boolean":e.write([10,t?1:0]);break;case"undefined":e.write(0);break;case"number":{if(Number.isSafeInteger(t))if(t>=0){if(t<=255){const n=new DataView(new ArrayBuffer(2),0,2);return n.setUint8(0,10),n.setUint8(1,t),void e.write(n)}if(t<=65535){const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,11),n.setUint16(1,t,!0),void e.write(n)}if(t<=4294967295){
const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,12),n.setUint32(1,t,!0),void e.write(n)}}else{if(t>=-128&&t<128){const n=new DataView(new ArrayBuffer(2),0,2);return n.setUint8(0,20),n.setInt8(1,t),void e.write(n)}if(t>=-32768&&t<32768){const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,21),n.setInt16(1,t,!0),void e.write(n)}if(t>=-2147483648&&t<2147483648){const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,22),n.setInt32(1,t,!0),void e.write(n)}}
const n=new DataView(new ArrayBuffer(9),0,9);n.setUint8(0,33),n.setFloat64(1,t,!0),e.write(n)}break;case"bigint":{const n=new DataView(new ArrayBuffer(9),0,9);t>=0n?(n.setUint8(0,13),n.setBigUint64(1,t,!0)):(n.setUint8(0,23),n.setBigUint64(1,t,!0)),e.write(n)}break;case"object":null===t?e.write(255):Array.isArray(t)?function(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,99),n.setUint32(1,t.length,!0),e.write(n);for(const n of t)Pe(e,n)
}(e,t):Oe(t)?Me(e,new Uint8Array(t)):ArrayBuffer.isView(t)?Me(e,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)):function(e,t){if("function"==typeof t.toJSON)return void Pe(e,t.toJSON());const n=Object.keys(t);{const t=new DataView(new ArrayBuffer(5),0,5);t.setUint8(0,100),t.setUint32(1,n.length,!0),e.write(t)}for(const r of n){const n=t[r];switch(typeof n){case"bigint":case"number":case"object":case"string":case"boolean":case"undefined":De(e,r),Pe(e,n)}}}(e,t)}}function Be(e){
const t=e.read();switch(t){case 0:return;case 255:return null;case 10:return e.read();case 11:return e.readNBytesDV(2).getUint16(0,!0);case 12:return e.readNBytesDV(4).getUint32(0,!0);case 13:return e.readNBytesDV(8).getBigUint64(0,!0);case 20:return e.read()<<8>>8;case 21:return e.readNBytesDV(2).getInt16(0,!0);case 22:return e.readNBytesDV(4).getInt32(0,!0);case 23:return e.readNBytesDV(8).getBigInt64(0,!0);case 32:return e.readNBytesDV(4).getFloat32(0,!0);case 33:
return e.readNBytesDV(8).getFloat64(0,!0);case 99:return function(e){const t=e.readNBytesDV(4).getUint32(0,!0),n=Array(t);for(let r=0;r<t;r++)n[r]=Be(e);return n}(e);case 100:return function(e){const t=e.readNBytesDV(4).getUint32(0,!0),n=Object.create(null);for(let r=0;r<t;r++)n[Ie(e.readNBytes(e.readNBytesDV(4).getUint32(0,!0)))]=Be(e);return n}(e);case 101:return Ie(e.readNBytes(e.readNBytesDV(4).getUint32(0,!0)));case 102:return e.readNBytes(e.readNBytesDV(4).getUint32(0,!0));default:
throw Error("Parse Error: Invalid data ID: "+t)}}function Ne(e){if("string"!=typeof e||!e)throw Error("expected a non-empty string, got: "+e)}function Re(e){if("number"!=typeof e)throw Error("expected a number, got: "+e)}function Ue(e){return function(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}(e,(e=>e.unicode))}function Fe(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(Error("IDB blocked")),n.onsuccess=()=>e(n.result)}
async function He(e){const t=await new Promise(((t,n)=>{const r=indexedDB.open(e,Si);Gi[e]=r,r.onupgradeneeded=e=>{e.oldVersion<ji&&function(e){function t(t,n,r){const o=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(r)for(const[e,[t,n]]of Object.entries(r))o.createIndex(e,t,{multiEntry:n});return o}t(Ii),t(Li,Pi,{[Mi]:[Di,!0],[Ui]:[[Ni,Ri]],[qi]:[Wi,!0]}),t(Oi,void 0,{[Bi]:[""]})}(r.result)},Fe(t,n,r)}));return t.onclose=()=>$e(e),t}function ze(e,t,n,r){
return new Promise(((o,i)=>{const s=e.transaction(t,n,{durability:"relaxed"}),a="string"==typeof t?s.objectStore(t):t.map((e=>s.objectStore(e)));let c;r(a,s,(e=>{c=e})),s.oncomplete=()=>o(c),s.onerror=()=>i(s.error)}))}function $e(e){const t=Gi[e],n=t&&t.result;if(n){n.close();const t=Ji[e];if(t)for(const e of t)e()}delete Gi[e],delete Ki[e],delete Ji[e]}function Ve(e){
return e.split(/[\s_]+/).map((e=>!e.match(/\w/)||Yi.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase())).filter(Boolean)}function qe(e){return e.filter(Boolean).map((e=>e.toLowerCase())).filter((e=>e.length>=Xi))}function We(e,t,n,r){e[t](n).onsuccess=e=>r&&r(e.target.result)}function Ge(e,t,n){We(e,"get",t,n)}function Ke(e,t,n){We(e,"getAll",t,n)}function Je(e){e.commit&&e.commit()}function Ye(e,t){const n=function(e,t){let n=e[0];for(let r=1;r<e.length;r++){
const o=e[r];t(n)>t(o)&&(n=o)}return n}(e,(e=>e.length)),r=[];for(const o of n)e.some((e=>-1===e.findIndex((e=>t(e)===t(o)))))||r.push(o);return r}async function Xe(e,t,n,r){try{const o=function(e){const t=e.map((({annotation:e,emoticon:t,group:n,order:r,shortcodes:o,skins:i,tags:s,emoji:a,version:c})=>{const l={annotation:e,group:n,order:r,tags:s,tokens:[...new Set(qe([...(o||[]).map(Ve).flat(),...(s||[]).map(Ve).flat(),...Ve(e),t]))].sort(),unicode:a,version:c};if(t&&(l.emoticon=t),
o&&(l.shortcodes=o),i){l.skinTones=[],l.skinUnicodes=[],l.skinVersions=[];for(const{tone:e,emoji:t,version:n}of i)l.skinTones.push(e),l.skinUnicodes.push(t),l.skinVersions.push(n)}return l}));return t}(t);await ze(e,[Li,Ii],Vi,(([e,t],i)=>{function s(){2==++l&&function(){if(a!==r||c!==n){e.clear();for(const t of o)e.put(t);t.put(r,Fi),t.put(n,Hi),Je(i)}}()}let a,c,l=0;Ge(t,Fi,(e=>{a=e,s()})),Ge(t,Hi,(e=>{c=e,s()}))}))}finally{}}async function Ze(e,t){const n=qe(Ve(t))
;return n.length?ze(e,Li,$i,((e,t,r)=>{const o=[],i=()=>{const e=Ye(o,(e=>e.unicode));r(e.sort(((e,t)=>e.order<t.order?-1:1)))};for(let t=0;t<n.length;t++){const r=n[t],s=t===n.length-1?IDBKeyRange.bound(r,r+"\uffff",!1,!0):IDBKeyRange.only(r);Ke(e.index(Mi),s,(e=>{o.push(e),o.length===n.length&&i()}))}})):[]}async function Qe(e,t){const n=await Ze(e,t);if(!n.length){const n=e=>(e.shortcodes||[]).includes(t.toLowerCase());return await async function(e,t){return ze(e,Li,$i,((e,n,r)=>{let o
;const i=()=>{e.getAll(o&&IDBKeyRange.lowerBound(o,!0),50).onsuccess=e=>{const n=e.target.result;for(const e of n)if(o=e.unicode,t(e))return r(e);if(n.length<50)return r();i()}};i()}))}(e,n)||null}return n.filter((e=>{const n=(e.shortcodes||[]).map((e=>e.toLowerCase()));return n.includes(t.toLowerCase())}))[0]||null}function et(e,t,n){return ze(e,t,$i,((e,t,r)=>Ge(e,n,r)))}function tt(e){!function(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||Qi.some((t=>!(t in e[0]))))
;if(!t||n)throw Error("Custom emojis are in the wrong format")}(e);const t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),r=function(e,t){const n=new Map;for(const r of e){const e=t(r);for(const t of e){let e=n;for(let n=0;n<t.length;n++){const r=t.charAt(n);let o=e.get(r);o||(o=new Map,e.set(r,o)),e=o}let o=e.get(Zi);o||(o=[],e.set(Zi,o)),o.push(r)}}return(e,t)=>{let r=n;for(let t=0;t<e.length;t++){const n=e.charAt(t),o=r.get(n);if(!o)return[];r=o}if(t)return r.get(Zi)||[]
;const o=[],i=[r];for(;i.length;){const e=[...i.shift().entries()].sort(((e,t)=>e[0]<t[0]?-1:1));for(const[t,n]of e)t===Zi?o.push(...n):i.push(n)}return o}}(e,(e=>{const t=new Set;if(e.shortcodes)for(const n of e.shortcodes)for(const e of Ve(n))t.add(e);return t})),o=e=>r(e,!0),i=e=>r(e,!1),s=new Map,a=new Map;for(const t of e){a.set(t.name.toLowerCase(),t);for(const e of t.shortcodes||[])s.set(e.toLowerCase(),t)}return{all:n,search:e=>{const n=Ve(e),r=n.map(((e,t)=>(t<n.length-1?o:i)(e)))
;return Ye(r,(e=>e.name)).sort(t)},byShortcode:e=>s.get(e.toLowerCase()),byName:e=>a.get(e.toLowerCase())}}function nt(e){if(!e)return e;if(es&&(e=structuredClone(e)),delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function rt(e,t){
if(2!==Math.floor(e.status/100))throw Error("Failed to fetch: "+t+":  "+e.status)}async function ot(e){const t=await fetch(e);rt(t,e);const n=t.headers.get("etag"),r=await t.json();return function(e){if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||ts.some((t=>!(t in e[0]))))throw Error("Emoji data is in the wrong format")}(r),[n,r]}async function it(e){let t=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=-1;++o<t;)r[o]=e.charCodeAt(o);return n
}(JSON.stringify(e));const n=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=-1;++o<r;)t+=String.fromCharCode(n[o]);return t}(await crypto.subtle.digest("SHA-1",t));return btoa(n)}async function st(e,t){let n,r=await async function(e){const t=await fetch(e,{method:"HEAD"});rt(t,e);const n=t.headers.get("etag");return n}(t);if(!r){const e=await ot(t);r=e[0],n=e[1],r||(r=await it(n))}await async function(e,t,n){const[r,o]=await Promise.all([Fi,Hi].map((t=>et(e,Ii,t))))
;return r===n&&o===t}(e,t,r)||(n||(n=(await ot(t))[1]),await Xe(e,n,t,r))}function at(e){return e.unicode.includes("\u200d")}function ct(e){const t=ds(e,"#000"),n=ds(e,"#fff");return t&&n&&us(t,n)}function lt(e){e.preventDefault(),e.stopPropagation()}function dt(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function ut(e,t){const n=new Set,r=[];for(const o of e){const e=t(o);n.has(e)||(n.add(e),r.push(o))}return r}function ht(e){{const t=document.createRange()
;return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function pt(e,t,n){let r=e.get(t);return r||(r=n(),e.set(t,r)),r}function ft(e){return""+e}function mt(e,t){const{targetNode:n}=t;let{targetParentNode:r}=t,o=!1;r?o=function(e,t){let n=e.firstChild,r=0;for(;n;){if(t[r]!==n)return!0;n=n.nextSibling,r++}return r!==t.length}(r,e):(o=!0,t.targetNode=void 0,t.targetParentNode=r=n.parentNode),o&&function(e,t){As?e.replaceChildren(...t):(e.innerHTML="",e.append(...t))}(r,e)}
function gt(e){let t="",n=!1,r=!1,o=-1;const i=new Map,s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a];if(t+=l,a===c-1)break;for(let e=0;e<l.length;e++)switch(l.charAt(e)){case"<":"/"===l.charAt(e+1)?s.pop():(n=!0,s.push(++o));break;case">":n=!1,r=!1;break;case"=":r=!0}const d=pt(i,s[s.length-1],(()=>[]));let u,h,p;if(r){const t=/(\S+)="?([^"=]*)$/.exec(l);u=t[1],h=t[2],p=/^[^">]*/.exec(e[a+1])[0]}const f={attributeName:u,attributeValuePre:h,attributeValuePost:p,expressionIndex:a};d.push(f),
n||r||(t+=" ")}const a=function(e){const t=document.createElement("template");return t.innerHTML=e,t}(t);return{template:a,elementsToBindings:i}}function bt(e,t,n){for(let r=0;r<e.length;r++){const o=e[r],i={binding:o,targetNode:o.attributeName?t:t.firstChild,targetParentNode:void 0,currentExpression:void 0};n.push(i)}}function yt(e){const{template:t,elementsToBindings:n}=pt(Cs,e,(()=>gt(e))),r=t.cloneNode(!0).content.firstElementChild,o=function(e,t){const n=[];let r
;if(1===t.size&&(r=t.get(0)))bt(r,e,n);else{const r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);let o=e,i=-1;do{const e=t.get(++i);e&&bt(e,o,n)}while(o=r.nextNode())}return n}(r,n);return function(e){return function(e,t){for(const n of t){const{targetNode:t,currentExpression:r,binding:{expressionIndex:o,attributeName:i,attributeValuePre:s,attributeValuePost:a}}=n,c=e[o];if(r!==c)if(n.currentExpression=c,i)t.setAttribute(i,s+ft(c)+a);else{let e
;Array.isArray(c)?mt(c,n):c instanceof Element?(e=c,t.replaceWith(e)):t.nodeValue=ft(c),e&&(n.targetNode=e)}}}(e,o),r}}function vt(e,t,n,r,o,i,s,a,c){function l(e,n,r){
return f(e,((e,o)=>p`<button role="${n?"option":"menuitem"}" aria-selected="${n?o===t.activeSearchItem:""}" aria-label="${d(e,t.currentSkinTone)}" title="${u(e)}" class="${"emoji"+(n&&o===t.activeSearchItem?" active":"")+(e.unicode?"":" custom-emoji")}" id="${`${r}-${e.id}`}" style="${e.unicode?"":`--custom-emoji-background: url(${JSON.stringify(e.url)})`}">${e.unicode?h(e,t.currentSkinTone):""}</button>`),(e=>`${r}-${e.id}`))}
const{labelWithSkin:d,titleForEmoji:u,unicodeWithSkin:h}=n,{html:p,map:f}=function(e){const t=pt(_s,e,(()=>new Map));let n=Ts;return{map:function(e,t,r){return e.map(((e,o)=>{const i=n;n=r(e);try{return t(e,o)}finally{n=i}}))},html:function(e,...r){const o=pt(t,e,(()=>new Map));return pt(o,n,(()=>yt(e)))(r)}}
}(t),m=p`<section data-ref="rootElement" class="picker" aria-label="${t.i18n.regionLabel}" style="${t.pickerStyle||""}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${t.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!(!t.searchMode||!t.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${t.activeSearchItemId?"emo-"+t.activeSearchItemId:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${t.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${t.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${t.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${t.skinTonePickerExpanded?"hide-focus":""}" aria-label="${t.skinToneButtonLabel}" title="${t.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${t.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${t.skinToneButtonText||""}</button></div><span id="skintone-description" class="sr-only">${t.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${t.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${t.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${t.i18n.skinTonesLabel}" aria-activedescendant="skintone-${t.activeSkinTone}" aria-hidden="${!t.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${f(t.skinTones,((e,n)=>p`<div id="skintone-${n}" class="emoji ${n===t.activeSkinTone?"active":""}" aria-selected="${n===t.activeSkinTone}" role="option" title="${t.i18n.skinTones[n]}" aria-label="${t.i18n.skinTones[n]}">${e}</div>`),(e=>e))}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${t.groups.length},1fr)" aria-label="${t.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${f(t.groups,(e=>p`<button role="tab" class="nav-button" aria-controls="tab-${e.id}" aria-label="${t.i18n.categories[e.name]}" aria-selected="${!t.searchMode&&t.currentGroup.id===e.id}" title="${t.i18n.categories[e.name]}" data-group-id="${e.id}"><div class="nav-emoji emoji">${e.emoji}</div></button>`),(e=>e.id))}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(t.isRtl?-1:1)*t.currentGroupIndex*100}%)"></div></div><div class="message ${t.message?"":"gone"}" role="alert" aria-live="polite">${t.message||""}</div><div data-ref="tabpanelElement" class="tabpanel ${!t.databaseLoaded||t.message?"gone":""}" role="${t.searchMode?"region":"tabpanel"}" aria-label="${t.searchMode?t.i18n.searchResultsLabel:t.i18n.categories[t.currentGroup.name]}" id="${t.searchMode?"":"tab-"+t.currentGroup.id}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${f(t.currentEmojisWithCategories,((e,n)=>p`<div><div id="menu-label-${n}" class="category ${1===t.currentEmojisWithCategories.length&&""===t.currentEmojisWithCategories[0].category?"gone":""}" aria-hidden="true">${t.searchMode?t.i18n.searchResultsLabel:e.category?e.category:t.currentEmojisWithCategories.length>1?t.i18n.categories.custom:t.i18n.categories[t.currentGroup.name]}</div><div class="emoji-menu ${0===n||t.searchMode||-1!==t.currentGroup.id?"":"visibility-auto"}" style="${"--num-rows: "+Math.ceil(e.emojis.length/t.numColumns)}" data-action="updateOnIntersection" role="${t.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${n}" id="${t.searchMode?"search-results":""}">${l(e.emojis,t.searchMode,"emo")}</div></div>`),(e=>e.category))}</div></div><div class="favorites onscreen emoji-menu ${t.message?"gone":""}" role="menu" aria-label="${t.i18n.favoritesLabel}" data-on-click="onEmojiClick">${l(t.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">😀</button></section>`,g=(t,n)=>{
for(const r of e.querySelectorAll(`[${t}]`))n(r,r.getAttribute(t))};if(c){e.appendChild(m);for(const e of["click","focusout","input","keydown","keyup"])g("data-on-"+e,((t,n)=>{t.addEventListener(e,r[n])}));g("data-ref",((e,t)=>{i[t]=e})),s.addEventListener("abort",(()=>{e.removeChild(m)}))}g("data-action",((e,t)=>{let n=a.get(t);n||a.set(t,n=new WeakSet),n.has(e)||(n.add(e),o[t](e))}))}function wt(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1
;return!0}function kt(e,t){function n(){const{customEmoji:e,database:t}=h,n=e||js;t.customEmoji!==n&&(t.customEmoji=n)}function r(e){const t=function(e,t,n){let r=!0;for(const o of e){const e=ht(n(o));void 0===ks&&(ks=ht(t));const i=e/1.8<ks;fs.set(o.unicode,i),i||(r=!1)}return r}(e,l.baselineEmoji,g);t?x():h.currentEmojis=[...h.currentEmojis]}function o(e){return!e.unicode||!at(e)||fs.get(e.unicode)}async function i(e){const t=h.emojiVersion||await ps()
;return e.filter((({version:e})=>!e||e<=t))}async function s(e){return function(e,t){const n=e=>{const n={};for(const r of e)"number"==typeof r.tone&&r.version<=t&&(n[r.tone]=r.unicode);return n};return e.map((({unicode:e,skins:t,shortcodes:r,url:o,name:i,category:s,annotation:a})=>({unicode:e,name:i,shortcodes:r,url:o,category:s,annotation:a,id:e||i,skins:t&&n(t)})))}(e,h.emojiVersion||await ps())}async function a(e){
const t=await h.database.getEmojiByUnicodeOrName(e),n=[...h.currentEmojis,...h.currentFavorites].find((t=>t.id===e)),r=n.unicode&&E(n,h.currentSkinTone);await h.database.incrementFavoriteEmojiCount(e),b("emoji-click",{emoji:t,skinTone:h.currentSkinTone,...r&&{unicode:r},...n.name&&{name:n.name}})}function c(e){h.currentSkinTone=e,h.skinTonePickerExpanded=!1,m("skintone-button"),b("skin-tone-change",{skinTone:e}),h.database.setPreferredSkinTone(e)}
const l={},d=new AbortController,u=d.signal,{state:h,createEffect:p}=function(e){let t,n=!1;const r=new Map,o=new Set;let i;const s=()=>{if(n)return;const e=[...o];o.clear();try{for(const t of e)t()}finally{i=!1,o.size&&(i=!0,xs(s))}},a=new Proxy({},{get(e,n){if(t){let e=r.get(n);e||(e=new Set,r.set(n,e)),e.add(t)}return e[n]},set(e,t,n){if(e[t]!==n){e[t]=n;const a=r.get(t);if(a){for(const e of a)o.add(e);i||(i=!0,xs(s))}}return!0}});return e.addEventListener("abort",(()=>{n=!0})),{state:a,
createEffect:e=>{const n=()=>{const r=t;t=n;try{return e()}finally{t=r}};return n()}}}(u),f=new Map;Ls(h,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),Ls(h,t),Ls(h,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,
skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:8,isRtl:!1,currentGroupIndex:0,groups:os,databaseLoaded:!1,activeSearchItemId:void 0}),p((()=>{h.currentGroup!==h.groups[h.currentGroupIndex]&&(h.currentGroup=h.groups[h.currentGroupIndex])}));const m=t=>{e.getElementById(t).focus()},g=t=>e.getElementById("emo-"+t.id),b=(e,t)=>{l.rootElement.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0
}))},y=(e,t)=>e.id===t.id,v=(e,t)=>{const{category:n,emojis:r}=e,{category:o,emojis:i}=t;return n===o&&wt(r,i,y)},w=e=>{wt(h.currentEmojis,e,y)||(h.currentEmojis=e)},k=e=>{h.searchMode!==e&&(h.searchMode=e)},E=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,C={labelWithSkin:(e,t)=>{return(n=[e.name||E(e,t),e.annotation,...e.shortcodes||js].filter(Boolean),ut(n,(e=>e))).join(", ");var n},titleForEmoji:e=>e.annotation||(e.shortcodes||js).join(", "),unicodeWithSkin:E},_={onClickSkinToneButton:function(e){
h.skinTonePickerExpanded=!h.skinTonePickerExpanded,h.activeSkinTone=h.currentSkinTone,h.skinTonePickerExpanded&&(lt(e),ws((()=>m("skintone-list"))))},onEmojiClick:async function(e){const{target:t}=e;t.classList.contains("emoji")&&(lt(e),a(t.id.substring(4)))},onNavClick:function(e){const{target:t}=e,n=t.closest(".nav-button");if(!n)return;const r=parseInt(n.dataset.groupId,10);l.searchElement.value="",h.rawSearchText="",h.searchText="",h.activeSearchItem=-1,
h.currentGroupIndex=h.groups.findIndex((e=>e.id===r))},onNavKeydown:function(e){const{target:t,key:n}=e,r=t=>{t&&(lt(e),t.focus())};switch(n){case"ArrowLeft":return r(t.previousElementSibling);case"ArrowRight":return r(t.nextElementSibling);case"Home":return r(t.parentElement.firstElementChild);case"End":return r(t.parentElement.lastElementChild)}},onSearchKeydown:function(e){if(!h.searchMode||!h.currentEmojis.length)return;const t=t=>{lt(e),
h.activeSearchItem=dt(t,h.activeSearchItem,h.currentEmojis)};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==h.activeSearchItem)return lt(e),a(h.currentEmojis[h.activeSearchItem].id);h.activeSearchItem=0}},onSkinToneOptionsClick:function(e){const{target:{id:t}}=e,n=t&&t.match(/^skintone-(\d)/);n&&(lt(e),c(parseInt(n[1],10)))},onSkinToneOptionsFocusOut:async function(e){const{relatedTarget:t}=e;t&&"skintone-list"===t.id||(h.skinTonePickerExpanded=!1)},
onSkinToneOptionsKeydown:function(e){if(!h.skinTonePickerExpanded)return;const t=async t=>{lt(e),h.activeSkinTone=t};switch(e.key){case"ArrowUp":return t(dt(!0,h.activeSkinTone,h.skinTones));case"ArrowDown":return t(dt(!1,h.activeSkinTone,h.skinTones));case"Home":return t(0);case"End":return t(h.skinTones.length-1);case"Enter":return lt(e),c(h.activeSkinTone);case"Escape":return lt(e),h.skinTonePickerExpanded=!1,m("skintone-button")}},onSkinToneOptionsKeyup:function(e){
if(h.skinTonePickerExpanded)return" "===e.key?(lt(e),c(h.activeSkinTone)):void 0},onSearchInput:function(e){h.rawSearchText=e.target.value}},T={calculateEmojiGridStyle:function(e){!function(e,t,n){let r;Es?(r=new ResizeObserver(n),r.observe(e)):ws(n),t.addEventListener("abort",(()=>{r&&r.disconnect()}))}(e,u,(()=>{{const e=getComputedStyle(l.rootElement),t=parseInt(e.getPropertyValue("--num-columns"),10),n="rtl"===e.getPropertyValue("direction");h.numColumns=t,h.isRtl=n}}))},
updateOnIntersection:function(e){!function(e,t,n){{const r=e.closest(".tabpanel");let o=Ss.get(r);o||(o=new IntersectionObserver(n,{root:r,rootMargin:"50% 0px 50% 0px",threshold:0}),Ss.set(r,o),t.addEventListener("abort",(()=>{o.disconnect()}))),o.observe(e)}}(e,u,(e=>{for(const{target:t,isIntersecting:n}of e)t.classList.toggle("onscreen",n)}))}};let A=!0;p((()=>{vt(e,h,C,_,T,l,u,f,A),A=!1})),h.emojiVersion||ps().then((e=>{e||(h.message=h.i18n.emojiUnsupportedMessage)})),p((()=>{
h.database&&async function(){let e=!1;const t=setTimeout((()=>{e=!0,h.message=h.i18n.loadingMessage}),1e3);try{await h.database.ready(),h.databaseLoaded=!0}catch(e){h.message=h.i18n.networkErrorMessage}finally{clearTimeout(t),e&&(e=!1,h.message="")}}()})),p((()=>{h.pickerStyle=`\n      --num-groups: ${h.groups.length}; \n      --indicator-opacity: ${h.searchMode?0:1}; \n      --num-skintones: 6;`})),p((()=>{h.customEmoji&&h.database&&n()})),p((()=>{
h.customEmoji&&h.customEmoji.length?h.groups!==rs&&(h.groups=rs):h.groups!==os&&(h.currentGroupIndex&&h.currentGroupIndex--,h.groups=os)})),p((()=>{!async function(){h.databaseLoaded&&(h.currentSkinTone=await h.database.getPreferredSkinTone())}()})),p((()=>{h.skinTones=[,,,,,,].fill().map(((e,t)=>function(e,t){if(0===t)return e;const n=e.indexOf(bs);return-1!==n?e.substring(0,n)+String.fromCodePoint(ys+t-1)+e.substring(n):(e.endsWith(ms)&&(e=e.substring(0,e.length-1)),
e+gs+String.fromCodePoint(vs+t-1))}(h.skinToneEmoji,t)))})),p((()=>{h.skinToneButtonText=h.skinTones[h.currentSkinTone]})),p((()=>{h.skinToneButtonLabel=h.i18n.skinToneLabel.replace("{skinTone}",h.i18n.skinTones[h.currentSkinTone])})),p((()=>{h.databaseLoaded&&async function(){const{database:e}=h,t=(await Promise.all(as.map((t=>e.getEmojiByUnicodeOrName(t))))).filter(Boolean);h.defaultFavoriteEmojis=t}()})),p((()=>{h.databaseLoaded&&h.defaultFavoriteEmojis&&async function(){n()
;const{database:e,defaultFavoriteEmojis:t,numColumns:r}=h,o=await e.getTopFavoriteEmoji(r),i=await s(ut([...o,...t],(e=>e.unicode||e.name)).slice(0,r));h.currentFavorites=i}()})),p((()=>{!async function(){const{searchText:e,currentGroup:t,databaseLoaded:n,customEmoji:r}=h;if(n)if(e.length>=2){const t=await async function(e){return s(await i(await h.database.getEmojiBySearchQuery(e)))}(e);h.searchText===e&&(w(t),k(!0))}else{const{id:e}=t;if(-1!==e||r&&r.length){const t=await async function(e){
const t=-1===e?h.customEmoji:await h.database.getEmojiByGroup(e);return s(await i(t))}(e);h.currentGroup.id===e&&(w(t),k(!1))}}else h.currentEmojis=[],h.searchMode=!1}()}));const x=()=>{ws((()=>{var e;(e=l.tabpanelElement)&&(e.scrollTop=0)}))};return p((()=>{const{currentEmojis:e,emojiVersion:t}=h,n=e.filter((e=>e.unicode)).filter((e=>at(e)&&!fs.has(e.unicode)));if(!t&&n.length)w(e),ws((()=>r(n)));else{const n=t?e:e.filter(o);w(n),x()}})),p((()=>{})),p((()=>{const e=function(){
const{searchMode:e,currentEmojis:t}=h;if(e)return[{category:"",emojis:t}];const n=new Map;for(const e of t){const t=e.category||"";let r=n.get(t);r||(r=[],n.set(t,r)),r.push(e)}return[...n.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>h.customCategorySorting(e.category,t.category)))}();(e=>{wt(h.currentEmojisWithCategories,e,v)||(h.currentEmojisWithCategories=e)})(e)})),p((()=>{h.activeSearchItemId=-1!==h.activeSearchItem&&h.currentEmojis[h.activeSearchItem].id})),p((()=>{
const{rawSearchText:e}=h;is((()=>{h.searchText=(e||"").trim(),h.activeSearchItem=-1}))})),p((()=>{h.skinTonePickerExpanded?l.skinToneDropdown.addEventListener("transitionend",(()=>{h.skinTonePickerExpandedAfterAnimation=!0}),{once:!0}):h.skinTonePickerExpandedAfterAnimation=!1})),{$set(e){Ls(h,e)},$destroy(){d.abort()}}}function Et(e,t){return la(e,{i:2},t&&t.out,t&&t.dictionary)}var Ct={d:(e,t)=>{for(var n in t)Ct.o(t,n)&&!Ct.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}
;Ct.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Ct.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Ct.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var _t={};Ct.r(_t),Ct.d(_t,{Decoder:()=>wn,Encoder:()=>vn,PacketType:()=>yn,protocol:()=>bn})
;const Tt=Object.create(null);Tt.open="0",Tt.close="1",Tt.ping="2",Tt.pong="3",Tt.message="4",Tt.upgrade="5",Tt.noop="6";const At=Object.create(null);Object.keys(Tt).forEach((e=>{At[Tt[e]]=e}));const xt={type:"error",data:"parser error"
},St="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),jt="function"==typeof ArrayBuffer,Lt=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,It=({type:e,data:t},n,r)=>St&&t instanceof Blob?n?r(t):Ot(t,r):jt&&(t instanceof ArrayBuffer||Lt(t))?n?r(t):Ot(new Blob([t]),r):r(Tt[e]+(t||"")),Ot=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1]
;t("b"+(e||""))},n.readAsDataURL(e)};let Dt;const Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pt="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)Pt[Mt.charCodeAt(e)]=e;const Bt="function"==typeof ArrayBuffer,Nt=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Ut(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:Rt(e.substring(1),t)}:At[n]?e.length>1?{type:At[n],data:e.substring(1)}:{type:At[n]}:xt},Rt=(e,t)=>{if(Bt){
const n=(e=>{let t,n,r,o,i,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const l=new ArrayBuffer(s),d=new Uint8Array(l);for(t=0;t<a;t+=4)n=Pt[e.charCodeAt(t)],r=Pt[e.charCodeAt(t+1)],o=Pt[e.charCodeAt(t+2)],i=Pt[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&i;return l})(e);return Ut(n,t)}return{base64:!0,data:e}},Ut=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer;let Ft
;o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this
;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this
},o.prototype.emitReserved=o.prototype.emit,o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ht="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),zt="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),$t=zt.setTimeout,Vt=zt.clearTimeout;class qt extends Error{
constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Wt extends o{constructor(e){super(),this.writable=!1,s(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new qt(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){
"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Nt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){
return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Gt extends Wt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{
this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split("\x1e"),r=[];for(let e=0;e<n.length;e++){const o=Nt(n[e],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((e=>{
if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=Array(n);let o=0;e.forEach(((e,i)=>{It(e,!1,(e=>{
r[i]=e,++o===n&&t(r.join("\x1e"))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Kt=!1;try{Kt="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(ca){}const Jt=Kt;class Yt extends Gt{constructor(e){if(super(e),
"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Xt extends o{
constructor(e,t,n){super(),this.createRequest=e,s(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=i(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0)
;for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),
n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=Xt.requestsCount++,Xt.requests[this._index]=this)}_onError(e){
this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=c,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Xt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Xt.requestsCount=0,Xt.requests={},
"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",l):"function"==typeof addEventListener&&addEventListener("onpagehide"in zt?"pagehide":"unload",l,!1));const Zt=function(){const e=d({xdomain:!1});return e&&null!==e.responseType}(),Qt="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class en extends Wt{get name(){return"websocket"}doOpen(){
const e=this.uri(),t=this.opts.protocols,n=Qt?{}:i(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{
this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;It(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}r&&Ht((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){
void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const tn=zt.WebSocket||zt.MozWebSocket,nn={websocket:class extends en{createSocket(e,t,n){return Qt?new tn(e,t,n):t?new tn(e,t):new tn(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Wt{get name(){return"webtransport"}doOpen(){try{
this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const o=function(e,t){Ft||(Ft=new TextDecoder);const o=[];let i=0,s=-1,a=!1;return new TransformStream({transform(c,l){for(o.push(c);;){if(0===i){if(n(o)<1)break
;const e=r(o,1);a=!(128&~e[0]),s=127&e[0],i=s<126?3:126===s?1:2}else if(1===i){if(n(o)<2)break;const e=r(o,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(n(o)<8)break;const e=r(o,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>2097151){l.enqueue(xt);break}s=4294967296*a+t.getUint32(4),i=3}else{if(n(o)<s)break;const e=r(o,s);l.enqueue(Nt(a?e:Ft.decode(e),t)),i=0}if(0===s||s>e){l.enqueue(xt);break}}}})
}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(o).getReader(),s=t();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const a=()=>{i.read().then((({done:e,value:t})=>{e||(this.onPacket(t),a())})).catch((()=>{}))};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1
;this._writer.write(n).then((()=>{r&&Ht((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Yt{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Zt&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Xt(d,this.uri(),e)}}
},rn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,on=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],sn="function"==typeof addEventListener&&"function"==typeof removeEventListener,an=[]
;sn&&addEventListener("offline",(()=>{an.forEach((e=>e()))}),!1);class cn extends o{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=u(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=u(t.host).host);s(this,t),
this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),
this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=")
;t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),sn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},an.push(this._offlineEventListener))),
this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0)
;const e=this.opts.rememberUpgrade&&cn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){
this.readyState="open",cn.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":
const t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer)
;const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){
const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n
}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ht((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,
t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)}
;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(cn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){
if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),sn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=an.indexOf(this._offlineEventListener);-1!==e&&an.splice(e,1)}this.readyState="closed",this.id=null,
this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}cn.protocol=4;class ln extends cn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){function t(){s||(s=!0,l(),i.close(),i=null)}function n(){c("transport closed")}function r(){c("socket closed")}function o(e){i&&e.name!==i.name&&t()}let i=this.createTransport(e),s=!1
;cn.priorWebsocketSuccess=!1;const a=()=>{s||(i.send([{type:"ping",data:"probe"}]),i.once("packet",(e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;cn.priorWebsocketSuccess="websocket"===i.name,this.transport.pause((()=>{s||"closed"!==this.readyState&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())}))}else{const e=Error("probe error");e.transport=i.name,
this.emitReserved("upgradeError",e)}})))},c=e=>{const n=Error("probe error: "+e);n.transport=i.name,t(),this.emitReserved("upgradeError",n)},l=()=>{i.removeListener("open",a),i.removeListener("error",c),i.removeListener("close",n),this.off("close",r),this.off("upgrading",o)};i.once("open",a),i.once("error",c),i.once("close",n),this.once("close",r),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{s||i.open()}),200):i.open()}
onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class dn extends ln{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>nn[e])).filter((e=>!!e))),super(e,n)}}
const un="function"==typeof ArrayBuffer,hn=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,pn=Object.prototype.toString,fn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===pn.call(Blob),mn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===pn.call(File),gn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],bn=5;var yn;!function(e){
e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(yn||(yn={}));class vn{constructor(e){this.replacer=e}encode(e){return e.type!==yn.EVENT&&e.type!==yn.ACK||!p(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===yn.EVENT?yn.BINARY_EVENT:yn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type
;return e.type!==yn.BINARY_EVENT&&e.type!==yn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=f(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}class wn extends o{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");t=this.decodeString(e)
;const n=t.type===yn.BINARY_EVENT;n||t.type===yn.BINARY_ACK?(t.type=n?yn.EVENT:yn.ACK,this.reconstructor=new kn(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!h(e)&&!e.base64)throw Error("Unknown type: "+e);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={
type:Number(e.charAt(0))};if(void 0===yn[n.type])throw Error("unknown packet type "+n.type);if(n.type===yn.BINARY_EVENT||n.type===yn.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1
;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!wn.isPayloadValid(n.type,r))throw Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case yn.CONNECT:return y(t);case yn.DISCONNECT:return void 0===t;case yn.CONNECT_ERROR:return"string"==typeof t||y(t);case yn.EVENT:
case yn.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===gn.indexOf(t[0]));case yn.ACK:case yn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class kn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=g(this.reconPack,this.buffers)
;return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const En=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Cn extends o{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),
this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[v(e,"open",this.onopen.bind(this)),v(e,"packet",this.onpacket.bind(this)),v(e,"error",this.onerror.bind(this)),v(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){
return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,o;if(En.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:yn.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),i.id=e}
const s=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,a=this.connected&&!(null===(o=this.io.engine)||void 0===o?void 0:o._hasPingExpired());return this.flags.volatile&&!s||(a?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t)
;const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))}),r),i=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise(((n,r)=>{const o=(e,t)=>e?r(e):n(t);o.withError=!0,t.push(o),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={
id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,
this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:yn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){
Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>t.id+""===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case yn.CONNECT:
e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case yn.EVENT:case yn.BINARY_EVENT:this.onevent(e);break;case yn.ACK:case yn.BINARY_ACK:this.onack(e);break;case yn.DISCONNECT:this.ondisconnect();break;case yn.CONNECT_ERROR:this.destroy()
;const t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1
;return function(...r){n||(n=!0,t.packet({type:yn.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{
this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:yn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}
timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){
return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){
return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}w.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},w.prototype.reset=function(){this.attempts=0},
w.prototype.setMin=function(e){this.ms=e},w.prototype.setMax=function(e){this.max=e},w.prototype.setJitter=function(e){this.jitter=e};class _n extends o{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,s(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),
this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new w({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||_t;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){
return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,
null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new dn(this.uri,this.opts)
;const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=v(t,"open",(function(){n.onopen(),e&&e()})),o=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=v(t,"error",o);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),o(Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(i),this}
connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(v(e,"ping",this.onping.bind(this)),v(e,"data",this.ondata.bind(this)),v(e,"error",this.onerror.bind(this)),v(e,"close",this.onclose.bind(this)),v(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){Ht((()=>{this.emitReserved("packet",e)
}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Cn(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,
this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),
this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),
this.emitReserved("reconnect",e)}}const Tn={};Object.assign(k,{Manager:_n,Socket:Cn,io:k,connect:k});const An=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t
},xn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_()
;const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const o=e[t],i=t+1<e.length,s=i?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=o>>2,d=(3&o)<<4|s>>4;let u=(15&s)<<2|c>>6,h=63&c;a||(h=64,i||(u=64)),r.push(n[l],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(An(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++]
;if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_()
;const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const o=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const s=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==o||null==i||null==s||null==a)throw new Sn;const c=o<<2|i>>4;if(r.push(c),64!==s){const e=i<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},
this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}}
;class Sn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jn=function(e){return function(e){const t=An(e);return xn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ln=function(e){try{return xn.decodeString(e,!0)}catch(e){}return null},In=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Ct.g)return Ct.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,On=()=>{try{
return In()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Ln(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},Dn=()=>{var e;return null===(e=On())||void 0===e?void 0:e.config};class Mn{constructor(){this.reject=()=>{},this.resolve=()=>{},
this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class Pn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bn.prototype.create)}}class Bn{constructor(e,t,n){this.service=e,this.serviceName=t,
this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],i=o?function(e,t){return e.replace(Nn,((e,n)=>{const r=t[n];return null!=r?r+"":`<${n}?>`}))}(o,n):"Error",s=`${this.serviceName}: ${i} (${r}).`;return new Pn(r,s,n)}}const Nn=/\{\$([^}]+)}/g,Rn=1e3,Un=2,Fn=144e5,Hn=.5;class zn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}
setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $n="[DEFAULT]";class Vn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e)
;if(!this.instancesDeferred.has(t)){const e=new Mn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null
;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{
this.getOrInitializeService({instanceIdentifier:$n})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=$n){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values())
;await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=$n){return this.instances.has(e)}getOptions(e=$n){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`)
;if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{
o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===$n?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{
this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=$n){return this.component?this.component.multipleInstances?e:$n:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`)
;t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Wn=[];var Gn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gn||(Gn={}))
;const Kn={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},Jn=Gn.INFO,Yn={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},Xn=(e,t)=>{if(!(t<e.logLevel||((new Date).toISOString(),Yn[t])))throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Zn{constructor(e){this.name=e,this._logLevel=Jn,this._logHandler=Xn,this._userLogHandler=null,Wn.push(this)}get logLevel(){
return this._logLevel}set logLevel(e){if(!(e in Gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Kn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){
this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...e),this._logHandler(this,Gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...e),this._logHandler(this,Gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...e),this._logHandler(this,Gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...e),this._logHandler(this,Gn.WARN,...e)}error(...e){
this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...e),this._logHandler(this,Gn.ERROR,...e)}}const Qn=(e,t)=>t.some((t=>e instanceof t));let er,tr;const nr=new WeakMap,rr=new WeakMap,or=new WeakMap,ir=new WeakMap,sr=new WeakMap;let ar={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return rr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||or.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return L(e[t])},
set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};const cr=e=>sr.get(e),lr=["get","getKey","getAll","getAllKeys","count"],dr=["put","add","delete","clear"],ur=new Map;var hr;hr=ar,ar={...hr,get:(e,t,n)=>O(e,t)||hr.get(e,t,n),has:(e,t)=>!!O(e,t)||hr.has(e,t)};class pr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent()
;return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}
const fr="@firebase/app",mr="0.10.13",gr=new Zn("@firebase/app"),br="@firebase/app-compat",yr="@firebase/analytics-compat",vr="@firebase/analytics",wr="@firebase/app-check-compat",kr="@firebase/app-check",Er="@firebase/auth",Cr="@firebase/auth-compat",_r="@firebase/database",Tr="@firebase/data-connect",Ar="@firebase/database-compat",xr="@firebase/functions",Sr="@firebase/functions-compat",jr="@firebase/installations",Lr="@firebase/installations-compat",Ir="@firebase/messaging",Or="@firebase/messaging-compat",Dr="@firebase/performance",Mr="@firebase/performance-compat",Pr="@firebase/remote-config",Br="@firebase/remote-config-compat",Nr="@firebase/storage",Rr="@firebase/storage-compat",Ur="@firebase/firestore",Fr="@firebase/vertexai-preview",Hr="@firebase/firestore-compat",zr="firebase",$r="[DEFAULT]",Vr={
[fr]:"fire-core",[br]:"fire-core-compat",[vr]:"fire-analytics",[yr]:"fire-analytics-compat",[kr]:"fire-app-check",[wr]:"fire-app-check-compat",[Er]:"fire-auth",[Cr]:"fire-auth-compat",[_r]:"fire-rtdb",[Tr]:"fire-data-connect",[Ar]:"fire-rtdb-compat",[xr]:"fire-fn",[Sr]:"fire-fn-compat",[jr]:"fire-iid",[Lr]:"fire-iid-compat",[Ir]:"fire-fcm",[Or]:"fire-fcm-compat",[Dr]:"fire-perf",[Mr]:"fire-perf-compat",[Pr]:"fire-rc",[Br]:"fire-rc-compat",[Nr]:"fire-gcs",[Rr]:"fire-gcs-compat",[Ur]:"fire-fst",
[Hr]:"fire-fst-compat",[Fr]:"fire-vertex","fire-js":"fire-js",[zr]:"fire-js-all"},qr=new Map,Wr=new Map,Gr=new Map,Kr=new Bn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted",
"no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",
"idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Jr{constructor(e,t,n){this._isDeleted=!1,
this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new zn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}
get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}const Yr="firebase-heartbeat-database",Xr=1,Zr="firebase-heartbeat-store";let Qr=null;class eo{constructor(e){this.container=e,this._heartbeatsCache=null
;const t=this.container.getProvider("app").getImmediate();this._storage=new to(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=H();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,
null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){gr.warn(e)}}async getHeartbeatsHeader(){
var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=H(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),z(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),z(n)>t){n.pop();break}r=r.slice(1)}
return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=jn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return gr.warn(e),""}}}class to{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}
async runIndexedDBEnvironmentCheck(){return!!E()&&C().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await R()).transaction(Zr),n=await t.objectStore(Zr).get(F(e));return await t.done,n}catch(e){if(e instanceof Pn)gr.warn(e.message);else{const t=Kr.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});gr.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{
heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return U(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return U(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}var no
;no="",M(new zn("platform-logger",(e=>new pr(e)),"PRIVATE")),M(new zn("heartbeat",(e=>new eo(e)),"PRIVATE")),N(fr,mr,no),N(fr,mr,"esm2017"),N("fire-js",""),N("firebase","10.14.1","app");const ro="@firebase/installations",oo="0.6.9",io=1e4,so="w:"+oo,ao="FIS_v2",co="https://firebaseinstallations.googleapis.com/v1",lo=36e5,uo=new Bn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',
"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."}),ho=/^[cdef][\w-]{21}$/,po="",fo=new Map;let mo=null
;const go="firebase-installations-database",bo=1,yo="firebase-installations-store";let vo=null;const wo="installations",ko=e=>{const t=P(e.getProvider("app").getImmediate(),wo).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ae(t);return r?r.catch(console.error):he(t).catch(console.error),n.fid}(t),getToken:e=>me(t,e)}};M(new zn(wo,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){
if(!e||!e.options)throw ge("App Configuration");if(!e.name)throw ge("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ge(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:P(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),M(new zn("installations-internal",ko,"PRIVATE")),N(ro,oo),N(ro,oo,"esm2017")
;const Eo="analytics",Co="firebase_id",_o="origin",To=6e4,Ao="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xo="https://www.googletagmanager.com/gtag/js",So=new Zn("@firebase/analytics"),jo=new Bn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",
"already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",
"interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
"indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",
"no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."}),Lo=30,Io=new class{constructor(e={},t=1e3){this.throttleMetadata=e,
this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};class Oo{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Do,Mo;class Po{constructor(e){this.app=e}_delete(){return delete Bo[this.app.options.appId],Promise.resolve()}}let Bo={},No=[];const Ro={};let Uo,Fo,Ho="dataLayer",zo="gtag",$o=!1
;const Vo="@firebase/analytics",qo="0.10.8";M(new zn(Eo,((e,{options:t})=>Se(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),M(new zn("analytics-internal",(function(e){try{const t=e.getProvider(Eo).getImmediate();return{logEvent:(e,n,r)=>Le(t,e,n,r)}}catch(e){throw jo.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),N(Vo,qo),N(Vo,qo,"esm2017");var Wo,Go,Ko=function(e,t,n,r,o){
if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Jo=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Wo=new WeakMap,Go=new WeakMap;const Yo=class{constructor(e,t){Wo.set(this,void 0),Go.set(this,void 0),Ko(this,Wo,ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e),"f"),Ko(this,Go,t||0,"f")}read(){var e,t;return Jo(this,Wo,"f")[(Ko(this,Go,(t=Jo(this,Go,"f"),e=t++,
t),"f"),e)]}readNBytes(e){return Jo(this,Wo,"f").subarray(Jo(this,Go,"f"),Ko(this,Go,Jo(this,Go,"f")+e,"f"))}readNBytesDV(e){const t=Jo(this,Wo,"f").subarray(Jo(this,Go,"f"),Ko(this,Go,Jo(this,Go,"f")+e,"f"));return new DataView(t.buffer,t.byteOffset,t.byteLength)}};var Xo,Zo,Qo=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ei=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};Xo=new WeakMap,Zo=new WeakMap;const ti=class{constructor(){Xo.set(this,[]),Zo.set(this,0)}write(e){if("number"==typeof e)Qo(this,Xo,"f").push(e),ei(this,Zo,Qo(this,Zo,"f")+1,"f");else if(Array.isArray(e)){const t=Uint8Array.from(e);Qo(this,Xo,"f").push(t),ei(this,Zo,Qo(this,Zo,"f")+t.byteLength,"f")
}else if(ArrayBuffer.isView(e)){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);Qo(this,Xo,"f").push(t),ei(this,Zo,Qo(this,Zo,"f")+t.byteLength,"f")}else{const t=new Uint8Array(e);Qo(this,Xo,"f").push(t),ei(this,Zo,Qo(this,Zo,"f")+t.byteLength,"f")}}toBuffer(){const e=new Uint8Array(Qo(this,Zo,"f"));let t=0;for(const n of Qo(this,Xo,"f"))"number"!=typeof n?(e.set(n,t),t+=n.byteLength):e[t++]=n;return e}},ni=Object.freeze(Object.create(null,{encode:{value:function(e){
if("object"!=typeof e||null==e)throw Error("Data must be a non-null object or array.");const t=new ti;return t.write(Uint8Array.of(128,99,98,106,102,2)),Pe(t,e),t.toBuffer().buffer},writable:!1,enumerable:!1,configurable:!1},decode:{value:function(e){if(Array.isArray(e)||"function"==typeof e[Symbol.iterator])e=Uint8Array.from(e);else if(Oe(e))e=new Uint8Array(e);else{if(!ArrayBuffer.isView(e))throw Error("Data must be a Uint8Array or ArrayBuffer object.")
;e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(128!==e[0]||99!==e[1]||98!==e[2]||106!==e[3]||102!==e[4]||2!==e[5])throw Error("Parse Error: Invalid magic value");return Be(new Yo(e,6))},writable:!1,enumerable:!1,configurable:!1},[Symbol.toStringTag]:{value:"NettleDB",writable:!1,enumerable:!1,configurable:!1}
})),ri="object"==typeof globalThis&&null!=globalThis?globalThis:"object"==typeof window&&null!=window?window:"object"==typeof global&&null!=global?global:"object"==typeof self&&null!=self?self:Function("return this;")();"object"==typeof ri&&null!=ri&&Object.defineProperty(ri,"NettleDB",{value:ni,writable:!1,enumerable:!1,configurable:!1});const oi=ni,ii=function(){for(let e=Object.getPrototypeOf(this);null!=e;e=Object.getPrototypeOf(e))try{delete e.constructor}catch(e){}
},si=Object.freeze(Object.create(null));Object.defineProperty(ii,"prototype",{value:si,writable:!1,enumerable:!1,configurable:!1}),Object.setPrototypeOf(ii,null),Object.freeze(ii);const ai=ii;var ci,li=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}
;ci=new WeakMap;const di=class extends ai{constructor(){super(...arguments),ci.set(this,Object.create(null))}get size(){return Object.keys(li(this,ci,"f")).length}has(e){return e in li(this,ci,"f")}get(e){return li(this,ci,"f")[e]||null}set(e,t){li(this,ci,"f")[e]=t}delete(e){return delete li(this,ci,"f")[e]}clear(){const e=li(this,ci,"f");for(const t of Object.keys(e))delete e[t]}keys(){return Object.keys(li(this,ci,"f"))}values(){const e=li(this,ci,"f"),t=[]
;for(const n of Object.keys(e))t.push(e[n]);return t}entries(){const e=li(this,ci,"f"),t=[];for(const n of Object.keys(e))t.push([n,e[n]]);return t}};var ui,hi=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},pi=function(e,t,n,r,o){
if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};ui=new WeakMap;const fi=class extends ai{get size(){return hi(this,ui,"f").length}constructor(e){super(),ui.set(this,void 0),pi(this,ui,e,"f")}has(e){
return null!=hi(this,ui,"f").getItem(e)}get(e){return hi(this,ui,"f").getItem(e)}set(e,t){hi(this,ui,"f").setItem(e,t)}delete(e){return hi(this,ui,"f").removeItem(e),!0}clear(){hi(this,ui,"f").clear()}keys(){const e=hi(this,ui,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++)n[r]=e.key(r);return n}values(){const e=hi(this,ui,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++)n[r]=e.getItem(e.key(r));return n}entries(){const e=hi(this,ui,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++){const t=e.key(r)
;n[r]=[t,e.getItem(t)]}return n}};var mi,gi,bi,yi,vi=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},wi=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable")
;if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};mi=new WeakMap,gi=new WeakMap,bi=new WeakMap,yi=new WeakMap;const ki=class extends ai{get message(){return vi(this,bi,"f")}get persistent(){return vi(this,yi,"f")}get localStorage(){return vi(this,mi,"f")}
get sessionStorage(){return vi(this,gi,"f")}constructor(e){super(),mi.set(this,void 0),gi.set(this,void 0),bi.set(this,void 0),yi.set(this,void 0);try{const{localStorage:t,sessionStorage:n}=e;if(null==t||null==n)throw Error("Required storage interfaces not available.");const r="___whitespider___",o=Date.now().toString(24);if(t.setItem(r,o),t.getItem(r)!==o)throw Error("Local storage test failed: value mismatch");if(n.setItem(r,o),
n.getItem(r)!==o)throw Error("Session storage test failed: value mismatch");wi(this,mi,new fi(t),"f"),wi(this,gi,new fi(n),"f"),wi(this,bi,null,"f"),wi(this,yi,!0,"f")}catch(e){wi(this,mi,new di,"f"),wi(this,gi,new di,"f"),wi(this,bi,e+"","f"),wi(this,yi,!1,"f")}}},Ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ci=new Uint8Array(new ArrayBuffer(256),0,256);for(let e=0;e<64;e++)Ci[Ei.charCodeAt(e)]=e;const _i=Object.freeze(Object.setPrototypeOf({encode:function(e){
const t=e.byteLength;let n="",r="";for(let r=0;r<t;r+=3){const t=e[r]<<16|e[r+1]<<8|e[r+2];n+=Ei[t>>18&63]+Ei[t>>12&63]+Ei[t>>6&63]+Ei[63&t]}const o=t%3;return 1===o?(r="==",n=n.slice(0,-2)):2===o&&(r="=",n=n.slice(0,-1)),n+r},decode:function(e){const t=.75*e.length-(e.endsWith("==")?2:e.endsWith("=")?1:0),n=new Uint8Array(new ArrayBuffer(t),0,t);let r=0;for(let t=0;t<e.length;t+=4){const o=Ci[e.charCodeAt(t)]<<18|Ci[e.charCodeAt(t+1)]<<12|Ci[e.charCodeAt(t+2)]<<6|Ci[e.charCodeAt(t+3)]
;n[r++]=o>>16&255,n[r++]=o>>8&255,n[r++]=255&o}return n}},null)),Ti=_i,Ai=Object.freeze(Object.setPrototypeOf({encode:function(e){const t=[];for(const n of Array.from(e,(e=>e.codePointAt(0)||0)))n<=127?t.push(n):n<=2047?(t.push(n>>6|192),t.push(63&n|128)):n<=65535?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n<=1114111&&(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128));return Uint8Array.from(t)},decode:function(e){let t=0,n="";for(;t<e.byteLength;){
const r=e[t];if(128&r)if(192==(224&r)){const o=e[t+1];n+=String.fromCharCode((31&r)<<6|63&o),t+=2}else if(224==(240&r)){const o=e[t+1],i=e[t+2];n+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),t+=3}else if(240==(248&r)){const o=(7&r)<<18|(63&e[t+1])<<12|(63&e[t+2])<<6|63&e[t+3];n+=o<=1114111?String.fromCodePoint(o):"\ufffd",t+=4}else n+="\ufffd",t+=1;else n+=String.fromCharCode(r),t+=1}return n}
},null)),xi=Ai,Si=1,ji=1,Li="emoji",Ii="keyvalue",Oi="favorites",Di="tokens",Mi="tokens",Pi="unicode",Bi="count",Ni="group",Ri="order",Ui="group-order",Fi="eTag",Hi="url",zi="skinTone",$i="readonly",Vi="readwrite",qi="skinUnicodes",Wi="skinUnicodes",Gi={},Ki={},Ji={},Yi=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]),Xi=2,Zi="",Qi=["name","url"],es="undefined"!=typeof wrappedJSObject,ts=["annotation","emoji","group","order","version"]
;class ns{constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName="emoji-picker-element-"+this.locale,this._db=void 0,this._lazyUpdate=void 0,this._custom=tt(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await(t=this._dbName,Ki[t]||(Ki[t]=He(t)),Ki[t]);var t;!function(e,t){let n=Ji[e];n||(n=Ji[e]=[]),n.push(t)
}(this._dbName,this._clear);const n=this.dataSource,r=await async function(e){return!await et(e,Ii,Hi)}(e);r?await async function(e,t){let[n,r]=await ot(t);n||(n=await it(r)),await Xe(e,r,t,n)}(e,n):this._lazyUpdate=st(e,n)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return Re(e),await this.ready(),Ue(await async function(e,t){return ze(e,Li,$i,((e,n,r)=>{const o=IDBKeyRange.bound([t,0],[t+1,0],!1,!0)
;Ke(e.index(Ui),o,r)}))}(this._db,e)).map(nt)}async getEmojiBySearchQuery(e){return Ne(e),await this.ready(),[...this._custom.search(e),...Ue(await Ze(this._db,e)).map(nt)]}async getEmojiByShortcode(e){Ne(e),await this.ready();const t=this._custom.byShortcode(e);return t||nt(await Qe(this._db,e))}async getEmojiByUnicodeOrName(e){Ne(e),await this.ready();const t=this._custom.byName(e);return t||nt(await async function(e,t){return ze(e,Li,$i,((e,n,r)=>Ge(e,t,(n=>{if(n)return r(n)
;Ge(e.index(qi),t,(e=>r(e||null)))}))))}(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await et(this._db,Ii,zi)||0}async setPreferredSkinTone(e){return Re(e),await this.ready(),function(e,t,n,r){return ze(e,t,Vi,((e,t)=>{e.put(r,n),Je(t)}))}(this._db,Ii,zi,e)}async incrementFavoriteEmojiCount(e){return Ne(e),await this.ready(),t=this._db,n=e,ze(t,Oi,Vi,((e,t)=>Ge(e,n,(r=>{e.put((r||0)+1,n),Je(t)}))));var t,n}async getTopFavoriteEmoji(e){return Re(e),await this.ready(),
(await function(e,t,n){return 0===n?[]:ze(e,[Oi,Li],$i,(([e,r],o,i)=>{const s=[];e.index(Bi).openCursor(void 0,"prev").onsuccess=e=>{function o(e){if(s.push(e),s.length===n)return i(s);a.continue()}const a=e.target.result;if(!a)return i(s);const c=a.primaryKey,l=t.byName(c);if(l)return o(l);Ge(r,c,(e=>{if(e)return o(e);a.continue()}))}}))}(this._db,this._custom,e)).map(nt)}set customEmoji(e){this._custom=tt(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{
await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await $e(this._dbName)}async delete(){var e;await this._shutdown(),await(e=this._dbName,new Promise(((t,n)=>{$e(e),Fe(t,n,indexedDB.deleteDatabase(e))})))}}
const rs=[[-1,"\u2728","custom"],[0,"\u{1f600}","smileys-emotion"],[1,"\u{1f44b}","people-body"],[3,"\u{1f431}","animals-nature"],[4,"\u{1f34e}","food-drink"],[5,"\u{1f3e0}\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\u{1f4dd}","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\u{1f3c1}","flags"]].map((([e,t,n])=>({id:e,emoji:t,name:n}))),os=rs.slice(1),is="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout,ss={"\u{1fae8}":15.1,"\u{1fae0}":14,"\u{1f972}":13.1,
"\u{1f97b}":12.1,"\u{1f970}":11,"\u{1f929}":5,"\u{1f471}\u200d\u2640\ufe0f":4,"\u{1f923}":3,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f":2,"\u{1f600}":1,"\u{1f610}\ufe0f":.7,"\u{1f603}":.6
},as=["\u{1f60a}","\u{1f612}","\u2764\ufe0f","\u{1f44d}\ufe0f","\u{1f60d}","\u{1f602}","\u{1f62d}","\u263a\ufe0f","\u{1f614}","\u{1f629}","\u{1f60f}","\u{1f495}","\u{1f64c}","\u{1f618}"],cs='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',ls=(e,t)=>e<t?-1:e>t?1:0,ds=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d",{willReadFrequently:!0})
;return r.textBaseline="top",r.font="100px "+cs,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data},us=(e,t)=>{const n=[...e].join(",");return n===[...t].join(",")&&!n.startsWith("0,0,0,")};let hs;const ps=()=>(hs||(hs=new Promise((e=>is((()=>e(function(){const e=Object.entries(ss);try{for(const[t,n]of e)if(ct(t))return n}catch(e){}return e[0][1]}())))))),hs),fs=new Map,ms="\ufe0f",gs="\ud83c",bs="\u200d",ys=127995,vs=57339,ws=requestAnimationFrame
;let ks,Es="function"==typeof ResizeObserver;const Cs=new WeakMap,_s=new WeakMap,Ts=Symbol("un-keyed"),As="replaceChildren"in Element.prototype,xs="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e),Ss=new WeakMap,js=[],{assign:Ls}=Object;var Is={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",
searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons",
"people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const Os=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],Ds=`:host{--emoji-font-family:${cs}}`;class Ms extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style")
;t.textContent=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}'+Ds,
this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\u{1f590}\ufe0f",customCategorySorting:ls,customEmoji:null,i18n:Is,emojiVersion:null,...e};for(const e of Os)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=kt(this.shadowRoot,this._ctx))}disconnectedCallback(){xs((()=>{
if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch((()=>{}))}}))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),"emoji-version"===e?parseFloat(n):n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){
const{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new ns({locale:e,dataSource:t}))}_dbFlush(){xs((()=>this._dbCreate()))}}const Ps={};for(const e of Os)Ps[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw Error("database is read-only");this._set(e,t)}};Object.defineProperties(Ms.prototype,Ps),customElements.get("emoji-picker")||customElements.define("emoji-picker",Ms)
;var Bs=Uint8Array,Ns=Uint16Array,Rs=Int32Array,Us=new Bs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fs=new Bs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hs=new Bs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zs=function(e,t){for(var n=new Ns(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new Rs(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return{b:n,r:o}},$s=zs(Us,2),Vs=$s.b,qs=$s.r;Vs[28]=258,qs[258]=28
;for(var Ws=zs(Fs,0),Gs=Ws.b,Ks=(Ws.r,new Ns(32768)),Js=0;Js<32768;++Js){var Ys=(43690&Js)>>1|(21845&Js)<<1;Ys=(61680&(Ys=(52428&Ys)>>2|(13107&Ys)<<2))>>4|(3855&Ys)<<4,Ks[Js]=((65280&Ys)>>8|(255&Ys)<<8)>>1}var Xs=function(e,t,n){for(var r=e.length,o=0,i=new Ns(t);o<r;++o)e[o]&&++i[e[o]-1];var s,a=new Ns(t);for(o=1;o<t;++o)a[o]=a[o-1]+i[o-1]<<1;if(n){s=new Ns(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],d=t-e[o],u=a[e[o]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)s[Ks[u]>>c]=l
}else for(s=new Ns(r),o=0;o<r;++o)e[o]&&(s[o]=Ks[a[e[o]-1]++]>>15-e[o]);return s},Zs=new Bs(288);for(Js=0;Js<144;++Js)Zs[Js]=8;for(Js=144;Js<256;++Js)Zs[Js]=9;for(Js=256;Js<280;++Js)Zs[Js]=7;for(Js=280;Js<288;++Js)Zs[Js]=8;var Qs=new Bs(32);for(Js=0;Js<32;++Js)Qs[Js]=5;var ea=Xs(Zs,9,1),ta=Xs(Qs,5,1),na=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ra=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},oa=function(e,t){var n=t/8|0
;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},ia=function(e){return(e+7)/8|0},sa=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new Bs(e.subarray(t,n))},aa=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ca=function(e,t,n){var r=Error(t||aa[e])
;if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,ca),!n)throw r;return r},la=function(e,t,n,r){var o=e.length,i=r?r.length:0;if(!o||t.f&&!t.l)return n||new Bs(0);var s=!n,a=s||2!=t.i,c=t.i;s&&(n=new Bs(3*o));var l=function(e){var t=n.length;if(e>t){var r=new Bs(Math.max(2*t,e));r.set(n),n=r}},d=t.f||0,u=t.p||0,h=t.b||0,p=t.l,f=t.d,m=t.m,g=t.n,b=8*o;do{if(!p){d=ra(e,u,1);var y=ra(e,u+1,3);if(u+=3,!y){var v=e[(L=ia(u)+4)-4]|e[L-3]<<8,w=L+v;if(w>o){c&&ca(0);break}a&&l(h+v),
n.set(e.subarray(L,w),h),t.b=h+=v,t.p=u=8*w,t.f=d;continue}if(1==y)p=ea,f=ta,m=9,g=5;else if(2==y){var k=ra(e,u,31)+257,E=ra(e,u+10,15)+4,C=k+ra(e,u+5,31)+1;u+=14;for(var _=new Bs(C),T=new Bs(19),A=0;A<E;++A)T[Hs[A]]=ra(e,u+3*A,7);u+=3*E;var x=na(T),S=(1<<x)-1,j=Xs(T,x,1);for(A=0;A<C;){var L,I=j[ra(e,u,S)];if(u+=15&I,(L=I>>4)<16)_[A++]=L;else{var O=0,D=0;for(16==L?(D=3+ra(e,u,3),u+=2,O=_[A-1]):17==L?(D=3+ra(e,u,7),u+=3):18==L&&(D=11+ra(e,u,127),u+=7);D--;)_[A++]=O}}
var M=_.subarray(0,k),P=_.subarray(k);m=na(M),g=na(P),p=Xs(M,m,1),f=Xs(P,g,1)}else ca(1);if(u>b){c&&ca(0);break}}a&&l(h+131072);for(var B=(1<<m)-1,N=(1<<g)-1,R=u;;R=u){var U=(O=p[oa(e,u)&B])>>4;if((u+=15&O)>b){c&&ca(0);break}if(O||ca(2),U<256)n[h++]=U;else{if(256==U){R=u,p=null;break}var F=U-254;if(U>264){var H=Us[A=U-257];F=ra(e,u,(1<<H)-1)+Vs[A],u+=H}var z=f[oa(e,u)&N],$=z>>4;if(z||ca(3),u+=15&z,P=Gs[$],$>3&&(H=Fs[$],P+=oa(e,u)&(1<<H)-1,u+=H),u>b){c&&ca(0);break}a&&l(h+131072);var V=h+F
;if(h<P){var q=i-P,W=Math.min(P,V);for(q+h<0&&ca(3);h<W;++h)n[h]=r[q+h]}for(;h<V;++h)n[h]=n[h-P]}}t.l=p,t.p=R,t.b=h,t.f=d,p&&(d=1,t.m=m,t.d=f,t.n=g)}while(!d);return h!=n.length&&s?sa(n,0,h):n.subarray(0,h)},da=new Bs(0),ua="undefined"!=typeof TextDecoder&&new TextDecoder;try{ua.decode(da,{stream:!0})}catch(e){}"function"==typeof queueMicrotask&&queueMicrotask
;const ha=Object.freeze(oi.decode(Et(Ti.decode("hVRdb9s2FL3pPjoY+wIG9HWsggJ7iEx5ybZGkl1kSYANaLugS9cNw2BQ0pXEmiYV8sqy97Q/sv86kHK6DwTdG3nuOZdH95D6oyxe1/eqBwBwDwCWAj8BgEflcyRS+AqLaWnWoVLgxwcAnXGSpNGpRSVIbjCrpOuU2KWFMuUqG2RFbVpLikujCTVlLcqmpX9BnagqqZv0q26brYVtpE5nSbdloieTlUYZmx7WdZ0VxlZo0+Nuy5xRsmKHSZIkdZ3VRlPs5O+YfnnSbfdb2ilMtbFrobJClKvGml5X6WGSnCSPk5FUi7VUuzR6WfSa+ujICe1ih1buew6j2a+TJFNSY7w3H05RSIQ2dp0ovfmk22ZhMBX+CQB5JTeLM1YLEoqhtcYyU5a9tVixoZUK2X5QUjeMWmT7YThmakatdKwTDU5z7vtMQrcrhcIhI7tjvfMywSpZ12hREyusGRxaZizTSIOxqyO/9mTRCKmZEoR23y/4RJyEaH96xi5QVA8DWKOPviXqXMq5DqkPY+o8EBr8AAAuwwelXwSoxc+8BkW1KITDX1uL9Tzi0W+hKvF9ACBhG6QAvMYPAaBBOiOysugJA7zCDgD+kfbfoc7+P9Q6Sd6a2OxtialgcVkooVcBWOOnAHDTo939iApLMvZMqVDSgetKK7vxcwx+9F9uwDv8HADEfhp3TzQKzBt8dAezkdT2I+2NaORbfM9PVJIaJ7fB1QFA/mS7VmyD1kmj59FsmkQMdWn8y5pHPdXx44g9WUzyhxc/nF//cnXJWlordvXy26ffn7Mo5vzV8TnnF9cX7Ofvrp89ZbPpjPPL5xELllLOh2GYDsdTYxt+/YJvvXw284Lb9bSiKlpM8tB4u1baze/Qzk5PT0dFxJTw5lAHlb9Ak3yNJFjZCuuQ3vjmtwUt1jiPNhKHzliKbl/NPAo/mnmFG1liHDZHUkuSQsWuFArns7FLGNviSjTIrv0y5yMyyfneQGGq3WISGOdj90nORzDn3vb4fIaQwgskuzsAgG31LgD4FeJ9ANgMx6sT8Y0HXLghWx3Hy2UsOrlcxh7u0Ct8wH63C6+x14U0Jck+YDfhiHAh/NbiOwCQcv4X"))))
;let pa="whitespider";const{p:fa,s:ma,y:ga,e:ba}=ha.x;fa&&ma&&ga&&(pa=ma+ba+"bm."+ga+fa+"/",pa.length<10&&(pa=""));const ya=pa;let va;const wa=Object.freeze(Object.create(null,{_:{value:({console:e})=>{if(null==e||"object"!=typeof e)throw Error("Invalid interface");const t=Reflect.get(e,"log",void 0);if("function"!=typeof t)throw Error("Invalid instance impl");va=(...e)=>(Reflect.apply(t,null,e),!0)},writable:!1,enumerable:!1,configurable:!1},$:{get:()=>va,enumerable:!1,configurable:!1}}))
;(async({window:e,document:t})=>{function n(e){const n=t.getElementById(e);if(null==n)throw Error("Element does not exist: "+e);return n}function r(e){const n=t.querySelector(e);if(n instanceof HTMLElement)return n;throw Error("Failed to query selector: "+e)}function o(e){null!=e?(g.textContent=e,g.style.display="block"):g.style.display="none"}function i(e){b.appendChild(s(e)),y.style.display="block"}function s(e){const n=t.createElement("iframe");return n.setAttribute("width","1024"),
n.setAttribute("height","768"),n.setAttribute("allowfullscreen","true"),n.setAttribute("allowpaymentrequest","true"),n.setAttribute("name","Frame"),n.setAttribute("loading","lazy"),n.setAttribute("sandbox","allow-forms allow-popups allow-scripts allow-same-origin allow-pointer-lock"),n.setAttribute("scrolling","no"),n.setAttribute("frameborder","0"),n.setAttribute("credentialless","true"),n.setAttribute("referrerpolicy","no-referrer"),
n.setAttribute("src","data:application/xhtml+xml;base64,"+Ti.encode(xi.encode(`<?xml version="1.0" encoding="utf-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" lang="en">\n\t<head>\n\t\t<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\t\t<meta http-equiv="Referrer-Policy" content="no-referrer" />\n\t\t<meta name="referrer" content="no-referrer" />\n\t\t<meta name="viewport" content="width=device-width,initial-scale=1" />\n\t\t<base href="${origin}" target="_blank" />\n\t\t<link rel="icon" type="image/x-icon" href="res/google.ico" />\n\t\t<link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K" />\n\t\t<title>Google</title>\n\t</head>\n\t<body>\n\t\t<embed type="text/plain" width="1024" height="768" src="${e.replace(/\&/g,"&amp;")}" />\n\t</body>\n</html>`))),
n}function a(e){try{return new URL(e)}catch(e){return null}}function c(t){const n=e.open(void 0,"_blank","");if(null==n)return void o("Please allow popups in your browser settings and try again.");n.focus();const r=n.document
;r.head.innerHTML='<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><meta http-equiv="Referrer-Policy" content="no-referrer"/><meta name="referrer" content="no-referrer"/><meta name="viewport" content="width=device-width,initial-scale=1"/><base href="'+e.origin+'" target="_blank" /><link rel="icon" type="image/x-icon" href="res/google.ico" /><link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K"/>',
r.body.appendChild(t),r.title="Google"}async function l(t,n){try{const r=await e.fetch(t,{cache:n||"force-cache",method:"GET"});return r.ok?await r.text():null}catch(e){return null}}function d(e,t){return new Promise(((n,r)=>{const o=Date.now().toString(36),i=(e,t,a)=>{e===o&&(O.off("res",i),O.off("disconnect",s),null!=a?r(a):n(t))},s=()=>{O.off("res",i),O.off("disconnect",s),r("Error: Server connection interrupted.")};O.on("res",i),O.on("disconnect",s),O.emit("fetch",o,e,t)}))}var u,h
;"complete"!==t.readyState&&await new Promise((e=>{const n=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),setTimeout(e,100,null))};t.addEventListener("readystatechange",n,{passive:!0})})),e.focus(),wa._(e),e.onkeydown=e=>{if(e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey)switch(e.key){case"h":case"q":e.preventDefault(),e.stopPropagation(),p.replace("https://www.google.com/webhp?igu=1");break;case"b":e.preventDefault(),e.stopPropagation(),
C.hasAttribute("style")?C.removeAttribute("style"):C.setAttribute("style","filter: blur(15px);")}},e.onpopstate=e=>{e.preventDefault(),e.stopPropagation(),o("Notice: Please press ctrl+Q to leave this website.")},e.onappinstalled=e=>{e.preventDefault(),e.stopPropagation(),w.style.display="none"},e.onbeforeinstallprompt=e=>{e.preventDefault(),e.stopPropagation(),w.style.display="block",w.onclick=()=>{e.prompt()}}
;const p=e.location,f=e.history,m=p.pathname,g=n("error"),b=n("frame"),y=n("frame-view"),v=n("status"),w=n("install"),E=t.head,C=t.body,_=r('meta[name="description"]'),T=r('link[rel="canonical"]'),A=wa.$;{const{_a:W,_b:G,_d:K,_e:J,_f:Y,_g:X,_h:Z,_i:Q,_j:ee,_k:te,_l:ne,_m:re,_n:oe,_o:ie,_v:se,_w:ae,_p:ce,_q:le,_r:de}=ha;if((()=>{A(W,G);const e=new URL(p.href),n=e.hostname,r=e.origin;switch(e.protocol){case"http:":if("localhost"!==n)return e.protocol="https:",e.pathname="/",e.host=n,
p.replace(e.href),!1;break;case"https:":break;default:return!0}switch(n){case"whitespider.cf":case"whitespider.tk":case"whitespider.dev":case"whitespider.web.app":case"whitespider.pages.dev":case"whitespider.firebaseapp.com":return e.host="nettleweb.com",e.pathname="/",p.replace(e.href),!1}{const e=t[ie](Z);if(null==e||e[ee](Q)!==ne)return!0}for(const e of t[re](oe)){switch(e[ee]("type")||""){case"":case"text/javascript":case"application/javascript":break;default:return e.remove(),!0}
const t=e[ee]("src");if(!t||e.textContent)return e.remove(),!0;const n=new URL(t.startsWith("//")?"https:"+t:t,r);if(n.origin!==r){if("https:"===n.protocol){const e=n.host.split("."),t=e.length;if("com"===e[t-1]){const n=e[t-2];if(n.indexOf("google")>=0||n.indexOf("firebase")>=0)continue}}return e.remove(),!0}}return T[ee]("href")!==Y||null==t[ie](ce)||null==t[ie](le)||t[de]!==W.slice(2,11)})()){A(J,te);const ue=(new DOMParser).parseFromString(se,"application/xhtml+xml");ue.title=X
;const he=ue.body;he.innerHTML=K;{const pe=ue.createElement("button");pe.innerHTML=ae,pe.setAttribute("type","button"),pe.addEventListener("click",(()=>{p.replace(Y)}),{passive:!0}),he.appendChild(pe)}return void t.documentElement.replaceWith(ue.documentElement)}for(const fe of Object.getOwnPropertyNames(ha))2===fe.length&&delete ha[fe]}if(e!==e.top){if("null"===(null===(u=p.ancestorOrigins)||void 0===u?void 0:u.item(0))){const me=t.createElement("div");return me.style.padding="15px",
me.textContent="Click here to continue",me.onclick=()=>{const e=t.createElement("embed");e.type="text/plain",e.width="1280",e.height="720",e.src="https://nettleweb.com/embed.html",c(e)},C.innerHTML="",void C.appendChild(me)}if("https://nettleweb.com"!==p.origin)return void p.replace("https://nettleweb.com/embed.html")}je(B({appId:"1:176227430389:web:94270de43b7eb971c03abc",apiKey:"AIzaSyCPXTy7dt3fpcLd8kVTBtXy0xuBdeuhbFc",projectId:"whitespider",authDomain:"whitespider.firebaseapp.com",
databaseURL:"https://whitespider-default-rtdb.firebaseio.com",storageBucket:"whitespider.appspot.com",measurementId:"G-F72WBJT57S",messagingSenderId:"176227430389"},"NettleWeb"));const x=t.documentElement.clientWidth<800,S=new ki(e),{localStorage:j}=S;let L,I,O,D,M,P,N,R,U,F,H=null;if(null!==(h=e.isSecureContext)&&void 0!==h?h:"https:"===p.protocol){if(S.persistent)try{const ge=await l("/manifest.json","no-cache");if(null!=ge){const be=JSON.parse(ge).version;if(be!==j.get("__mf_version")){
C.innerHTML="Updating contents...";const ye=e.caches;for(const ve of await ye.keys())await ye.delete(ve);return j.set("__mf_version",be),void p.reload()}n("version").textContent="v"+be}L=j.get("__secrets_")||void 0}catch(we){}else o("Warning: Cookies are blocked by your browser. Some features might not work properly, and your game data will NOT be saved.");try{const ke=e.navigator.serviceWorker;null!=ke&&(await ke.register("/sw.js",{type:"classic",scope:"/",updateViaCache:"none"}),
await ke.ready)}catch(Ee){}}try{const Ce=await e.fetch("/d/index.json",{mode:"same-origin",cache:"no-cache",method:"GET"});if(!Ce.ok)throw Error("Remote returned error status code: "+Ce.status);N=oi.decode(Et(new Uint8Array(await Ce.arrayBuffer())))}catch(_e){return void o("Failed to initialize local game list. Message: "+_e)}try{const Te=e.top;null!=Te&&(M=Te===e?e:Te.origin===e.origin?Te:null)}catch(Ae){}g.onclick=()=>{g.innerHTML="",g.style.display="none"},n("frame-close").onclick=()=>{
b.innerHTML="",y.style.display="none",f.replaceState(void 0,"","/"),_.setAttribute("content",""),T.setAttribute("href","https://nettleweb.com/")},n("frame-newtab").onclick=()=>{const e=b.firstElementChild;null!=e&&(b.innerHTML="",y.style.display="none",c(e))};{const xe=r("link[rel*='icon']"),Se=n("backend-url"),Le=n("overlay"),Ie=n("notice"),Oe=n("theme"),De=n("tab-cloaking"),Me=n("stealth-mode");let Pe;function Be(e){if(null!=O&&(O.disconnect(),O.close()),null==D){const{q:e,r:t}=ha
;null!=e&&null!=t&&(D=e+t+ya)}O=k(e||D||"https://service.nettleweb.com/",{path:"/webapi/",secure:!0,upgrade:!0,timeout:1e4,forceNew:!0,multiplex:!1,protocols:[],transports:["polling","websocket"],autoConnect:!0,reconnection:!0,rememberUpgrade:!0,reconnectionDelay:5e3,closeOnBeforeunload:!0}),v.innerHTML="Connecting...",v.style.color="#808000",O.on("an",(e=>{"string"==typeof e&&e.length>0&&(Ie.textContent=e,Ie.style.display="block")})),"string"!=typeof I&&O.once("lr",(e=>{I=e})),
O.io.on("open",(()=>{v.innerHTML="\u2713Connected",v.style.color="#008000"})),O.io.on("close",(()=>{v.innerHTML="\u2715Disconnected",v.style.color="#ff0000"})),O.io.on("reconnect_attempt",(()=>{v.innerHTML="Connecting...",v.style.color="#808000"})),O.io.on("reconnect_error",(()=>{v.innerHTML="\u2715Disconnected",v.style.color="#ff0000"})),O.io.on("reconnect",(()=>{v.innerHTML="\u2713Connected",v.style.color="#008000",null!=L&&O.emit("login",L)}))}function Ne(e){
switch(null==Pe&&(Pe=t.createElement("link"),Pe.rel="stylesheet",Pe.type="text/css",Pe.href="index.dark.css",E.appendChild(Pe)),e){case"light":Pe.disabled=!0,Pe.removeAttribute("media");break;case"dark":Pe.disabled=!1,Pe.removeAttribute("media");break;default:Pe.media="all and (prefers-color-scheme: dark)",Pe.disabled=!1}}function Re(e){switch(e){case"empty":P=!0,t.title="\u2060",xe.type="image/x-icon",xe.href="/res/empty.ico";break;case"google":P=!0,t.title="Google",xe.type="image/x-icon",
xe.href="/res/google.ico";break;case"classroom":P=!0,t.title="Home",xe.type="image/png",xe.href="/res/classroom.png";break;default:P=!1,t.title="NettleWeb",xe.type="image/x-icon",xe.href="/favicon.ico"}}function Ue(e){switch(e){case"blank":t.onblur=t.onmouseleave=e=>{Le.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),Le.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Le.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Le.removeAttribute("data-x"))},
Le.innerHTML="",Le.removeAttribute("data-x");break;case"google":t.onblur=t.onmouseleave=e=>{Le.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),Le.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Le.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Le.removeAttribute("data-x"))},
Le.innerHTML='<iframe width="1024" height="768" allowfullscreen="true" allowpaymentrequest="true" name="Frame" allow="fullscreen payment" loading="lazy" scrolling="no" frameborder="0" credentialless="true" referrerpolicy="no-referrer" src="https://www.google.com/webhp?igu=1"></iframe>',Le.removeAttribute("data-x");break;default:Le.innerHTML="",Le.removeAttribute("data-x"),t.onblur=t.onmouseleave=t.onmousedown=t.ontouchstart=null}}Se.onblur=()=>{const e=a(Se.value.trim());if(null!=e){
const t=e.href;j.set("__backendURL_",t),Be(Se.value=t)}else j.delete("__backendURL_"),Be(Se.value="")},Oe.onchange=()=>{const e=Oe.value;Ne(e),j.set("__set_theme",e)},De.onchange=()=>{const e=De.value;Re(e),j.set("__set_tabc",e)},Me.onchange=()=>{const e=Me.value;Ue(e),j.set("__set_sm",e)};{const Fe=j.get("__backendURL_")||"";Be(Fe),Se.value=Fe}{const He=j.get("__set_theme")||"default";Ne(He),Oe.value=He}{const ze=j.get("__set_tabc")||"disabled";Re(ze),De.value=ze}{
const $e=j.get("__set_sm")||"disabled";Ue($e),Me.value=$e}}{const Ve=n("game-container"),qe=n("player"),We=n("game-page"),Ge=n("edit"),Ke=n("name"),Je=n("type"),Ye=n("tags"),Xe=n("date"),Ze=n("user"),Qe=n("desc"),et=n("ecode"),tt=n("dlink"),nt=n("lock"),rt=n("e-name"),ot=n("e-tags"),it=n("e-desc"),st=n("e-subm"),at=n("editor"),ct=n("s-games"),lt=n("controller"),dt=n("gnav-back"),ut=n("gnav-forward"),ht=n("gnav-page-no"),pt=n("gnav-page-count"),ft=[];let mt="p",gt="all",bt="",yt=0;{
const _t=n("game-search"),Tt=r("#game-search>input");let At=0;function xt(){bt=Tt.value.trim().toLowerCase(),kt()}_t.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),clearTimeout(At),xt()},Tt.onblur=()=>{clearTimeout(At),xt()},Tt.oninput=()=>{clearTimeout(At),At=setTimeout((()=>{xt()}),1e3)}}{const St=t.querySelectorAll("#game-category>button");for(const jt of St)jt.onclick=()=>{for(const e of St)e.removeAttribute("data-current");jt.setAttribute("data-current","true"),
gt=jt.getAttribute("data-match")||"all",kt()}}{const Lt=n("game-sort");Lt.value=mt=j.get("__gamesortorder")||"p",Lt.onchange=()=>{j.set("__gamesortorder",mt=Lt.value),kt()}}function vt(){switch(gt){case"all":return bt.length>0?N.filter((e=>e.name.toLowerCase().indexOf(bt)>=0||e.tags.indexOf(bt)>=0)):[...N];case"html5":return N.filter((e=>"html5"===e.type&&(0===bt.length||e.name.toLowerCase().indexOf(bt)>=0||e.tags.indexOf(bt)>=0)));case"flash":
return N.filter((e=>"flash"===e.type&&(0===bt.length||e.name.toLowerCase().indexOf(bt)>=0||e.tags.indexOf(bt)>=0)));case"dos":return N.filter((e=>"dos"===e.type&&(0===bt.length||e.name.toLowerCase().indexOf(bt)>=0||e.tags.indexOf(bt)>=0)));default:return N.filter((e=>e.tags.split(",").indexOf(gt)>=0&&(0===bt.length||e.name.toLowerCase().indexOf(bt)>=0)))}}function wt(){const e=N.filter((e=>!e.path.startsWith("https://")));for(let t=e.length;t>0;t--){const n=Math.floor(Math.random()*(t+1))
;[e[t],e[n]]=[e[n],e[t]]}return e}function kt(){yt=0,ft.length=0;const e=vt();if(0===e.length)return dt.disabled=!0,ut.disabled=!0,void(Ve.innerHTML="No results found :(");switch(mt){case"d":e.sort(((e,t)=>t.date-e.date));break;case"p":e.sort(((e,t)=>(t.count||0)-(e.count||0)))}for(let t=0;t<e.length;t+=100)ft.push(e.slice(t,t+100));Ct()}function Ct(){Ve.innerHTML="",ht.value=yt+1+"",ht.min="1",ht.max=pt.innerHTML=ft.length+"",dt.disabled=yt<1,yt>=ft.length-1?ut.disabled=!0:ut.disabled=!1
;for(const e of ft[yt]){const{name:n,prev:r,date:o}=e,i=t.createElement("a");i.href=o>0?"/"+o.toString(36):"#",i.title="Play "+n,i.target="_self",i.className="game",i.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),U(e))},i.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,i.appendChild(e)}if(e.path.startsWith("https://")){
const e=t.createElement("img");e.src="/res/cloud.svg",e.alt="Cloud",e.title="Embedded from third-party servers",e.width=24,e.height=24,e.loading="lazy",e.decoding="async",e.draggable=!1,i.appendChild(e)}switch(e.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",i.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",i.appendChild(e)}break;case"dos":{const e=t.createElement("span")
;e.textContent="Dos",e.style.background="#0000ff",i.appendChild(e)}break;default:i.style.backgroundImage='url("/res/preview.svg")'}Ve.appendChild(i)}}U=async({name:e,type:r,tags:i,date:a,path:c,desc:l,user:u})=>{null!=H&&H();for(const e of V)e.removeAttribute("data-current");q.checked=!1,We.setAttribute("data-current","true"),qe.appendChild(s("/player.html?name="+encodeURIComponent(e)+"&type="+r+"&url="+encodeURIComponent(c))),H=()=>{H=null,nt.title="Enable scroll lock",
nt.style.backgroundImage='url("res/lock-open-w.svg")',qe.innerHTML="",n("content").style.overflow="",P||(t.title="NettleWeb"),f.replaceState(void 0,"","/"),_.setAttribute("content",""),T.setAttribute("href","https://nettleweb.com/")},ct.innerHTML="",Ze.innerHTML="",Ke.textContent=e,Je.textContent=r.toUpperCase(),Ye.textContent=i.replace(/\,/g,", ")||"None",Xe.textContent=new Date(a).toLocaleDateString("POSIX",{month:"2-digit",day:"2-digit",year:"numeric"}),
Qe.textContent=l||"No information provided by the uploader.",lt.style.display="block",qe.scrollIntoView({block:"start",inline:"start",behavior:"instant"});{const n="/"+a.toString(36),r="https://nettleweb.com"+n;P||(t.title=e+" - NettleWeb"),f.replaceState(void 0,"",n),tt.textContent=r,et.textContent='<embed type="text/plain" width="1280" height="720" src="'+r+'" />',_.setAttribute("content","Play "+e+" for free at NettleWeb! 100% online; No plugins required. "+l.slice(0,30).trim()+"..."),
T.setAttribute("href",r)}Ge.innerHTML="Edit Game Info",Ge.disabled=!1,Ge.onclick=()=>{null!=L?(rt.value=e,ot.value=i,it.value=l,at.style.display="block",Ge.style.display="none"):z.click()},st.onclick=()=>{if(null==L)return void o("Invalid session. Please refresh this page and try again.");const e=rt.value.replace(/\s+/g," ").trim();if(0===e.length)return void o("Game name must not be empty.");if(e.length>256)return void o("Game name must be less than 256 characters in length.")
;const t=it.value.replace(/\s+/g," ").trim(),n=ot.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");n.length>300?o("Game tags list must be less than 300 characters long in total."):t.length>5e3?o("Game description text must be less than 5000 characters in length."):(st.disabled=!0,d(23,[L,a,e,n,t]).then((()=>{st.disabled=!1,Ge.disabled=!0,Ge.innerHTML="Requested. Pending review...",at.style.display="none",Ge.style.display="block"})).catch((e=>{
o("Failed to submit request. Message: "+e),st.disabled=!1})))};for(const e of wt().slice(3,9)){const{name:n,prev:r,date:o}=e;if(a!==o&&ct.childElementCount<5){const i=t.createElement("a");i.href=o>0?"/"+o.toString(36):"#",i.title="Play "+n,i.target="_self",i.className="game",i.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),U(e))},i.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{
const e=t.createElement("div");e.textContent=n,i.appendChild(e)}switch(e.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",i.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",i.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",i.appendChild(e)}break;default:i.style.backgroundImage='url("/res/preview.svg")'}
ct.appendChild(i)}}{const e=await d(1,u||"anonymous");{const n=t.createElement("img");n.alt="Avatar",n.width=40,n.height=40,n.loading="eager",n.decoding="sync",n.draggable=!1,Ze.appendChild(n);{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",endings:"native"}));n.src=t,await n.decode(),URL.revokeObjectURL(t)}}{const n=t.createElement("div");switch(n.className="user",n.textContent=e.id,e.vip){case 3:n.setAttribute("vip","gold");break;case 4:n.setAttribute("vip","diamond")}
Ze.appendChild(n)}Ze.onclick=()=>{F(e.uid).catch((e=>{o("Failed to open user profile. Message: "+e)}))}}if("localhost"!==p.hostname)try{await d(14,a)}catch(e){}},dt.onclick=()=>{yt--,Ct(),Ve.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},ut.onclick=()=>{yt++,Ct(),Ve.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},ht.onblur=()=>{const e=parseInt(ht.value.trim(),10)||0;yt+1!==e&&(e<1||e>ft.length?(ht.value="1",yt=0):yt=e-1,Ct(),Ve.scrollIntoView({
behavior:"instant",inline:"start",block:"start"}))},ht.onchange=()=>{ht.blur()},nt.onclick=()=>{"Disable scroll lock"===nt.title?(nt.title="Enable scroll lock",nt.style.backgroundImage='url("res/lock-open-w.svg")',n("content").style.overflow=""):(nt.title="Disable scroll lock",nt.style.backgroundImage='url("res/lock-w.svg")',n("content").style.overflow="hidden",qe.scrollIntoView({block:"start",inline:"start",behavior:"instant"}))},n("hide").onclick=()=>{lt.style.display="none"},
n("newtab").onclick=()=>{const e=qe.firstElementChild;null!=e&&(c(e),qe.textContent="Notice: This frame has been closed automatically for saving memory. Please refresh this page to re-open the frame.")},n("fullscreen").onclick=()=>{if(t.fullscreenEnabled){const e=qe.firstElementChild;null!=e&&e.requestFullscreen({navigationUI:"hide"})}else o("Fullscreen mode is not supported in the current browsing context.")},n("e-canc").onclick=()=>{at.style.display="none",Ge.style.display="block"},kt()}{
const It=n("addr"),Ot=n("ub-mode");function Dt(t){switch(Ot.value){case"raw-embed-v2":d(41,[t,0]).then((e=>{i(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}));break;case"raw-embed":i(t);break;case"prq-embed":!function(t){const n=(M||e).PaymentRequest;"function"==typeof n?new n([{data:[t],supportedMethods:"https://nettleweb.com/res/pay.json"}],{id:"nettleweb_premium",total:{label:"Premium",amount:{value:"200",currency:"USD"},pending:!0},modifiers:[],displayItems:[]
}).show():o("Error: Your browser does not support this feature.")}(t);break;default:d(41,[t,1]).then((e=>{i(e)})).catch((e=>{o("Failed to create new session. Message: "+e)}))}}function Mt(e,t){const n=a(e=e.replace(/\s+/g," ").trim());if(null!=n)return n.href;if(e.includes(" "))return t+encodeURIComponent(e);const r=e.indexOf("/");if(0===r)return t+encodeURIComponent(e);if(r>0){if(Pt(e.substring(0,r)))return"https://"+e}else if(Pt(e)&&e.includes("."))return"https://"+e
;return t+encodeURIComponent(e)}function Pt(e){e=e.toLowerCase();for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if((n<48||n>57)&&(n<97||n>122)&&45!==n&&46!==n)return!1}return!0}Ot.value=j.get("__unbl_mode_")||"puppeteer",Ot.onchange=()=>{j.set("__unbl_mode_",Ot.value)},It.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=It.value.trim();t.length>0&&Dt(Mt(t,"https://www.google.com/search?igu=1&q="))}},n("ub-google").onclick=()=>{
Dt("https://www.google.com/webhp?igu=1")},n("ub-discord").onclick=()=>{Dt("https://discord.com/")},n("ub-facebook").onclick=()=>{Dt("https://www.facebook.com/")},n("ub-instagram").onclick=()=>{Dt("https://www.instagram.com/")}}{const Bt=r("#yt-search>input"),Nt=r("#yt-search>button"),Rt=n("yt-load-more"),Ut=n("yt-results"),Ft=n("yt-server");Ft.value=j.get("__yt_ssvr")||"official";let Ht=null;function zt(e){switch(e.protocol){case"http:":case"https:":break;default:return null}switch(e.host){
case"piped.video":case"youtube.com":case"youtube-nocookie.com":case"www.youtube.com":case"www.youtube-nocookie.com":const t=e.pathname;return"/watch"===t?e.searchParams.get("v")||null:t.startsWith("/embed/")&&t.substring(7)||null;case"youtu.be":return e.pathname.substring(1)||null;default:return null}}function $t(e){const t=Ft.value;if("official"===t)return void i("https://www.youtube-nocookie.com/embed/"+e)
;const n=new URL("piped"===t?"https://cf.piped.video/watch":"https://piped-material.xn--17b.net/watch");{const t=n.searchParams;t.set("v",e),t.set("hl","en"),t.set("theme","light"),t.set("region","us"),t.set("quality","1080"),t.set("autoplay","false"),t.set("watchHistory","false"),t.set("sponsorblock","false"),t.set("playerAutoPlay","true")}i(n.href)}async function Vt(){o(null),Nt.disabled=!0,Bt.disabled=!0,Rt.style.display="none";const e=await d(40,[Bt.value.trim(),Ht])
;if(null==e||"object"!=typeof e)return void o("Error: API server returned invalid response.");const n=e.items;if(!Array.isArray(n)||0===n.length)return void o("No results match your search.");for(const e of n){const n=t.createElement("div");{const r=t.createElement("img");r.src=e.thumbnail,r.alt="Preview",r.width=160,r.height=90,r.loading="lazy",r.decoding="async",r.draggable=!1,r.crossOrigin="anonymous",n.appendChild(r)}{const r=t.createElement("div");{const n=t.createElement("div")
;n.className="title",n.textContent=e.title,r.appendChild(n)}{const n=t.createElement("div");n.className="desc",n.textContent=e.shortDescription,r.appendChild(n)}{const n=t.createElement("div");n.className="time",n.textContent=e.uploadedDate+"; Views: "+e.views,r.appendChild(n)}n.appendChild(r)}n.onclick=t=>{t.preventDefault(),t.stopPropagation(),$t(e.url.slice(9))},Ut.appendChild(n)}const r=e.nextpage;null!=r&&(Rt.style.display="block",Rt.onclick=()=>{Ht=r,Vt().then((()=>{Nt.disabled=!1,
Bt.disabled=!1}))})}n("yt-search").onsubmit=e=>{e.preventDefault(),e.stopPropagation(),Ht=null,Ut.innerHTML="";const t=a(Bt.value);if(null==t)return void Vt().then((()=>{Nt.disabled=!1,Bt.disabled=!1}));o(null),Rt.style.display="none";const n=zt(t);null!=n?$t(n):o("Error: Failed to parse YouTube video ID from the provided URL.")},Ft.onchange=()=>{j.set("__yt_ssvr",Ft.value)}}{const qt=n("emulator"),Wt=n("core"),Gt=n("bios"),Kt=n("game-rom");qt.onchange=()=>{switch(qt.value){case"flash":
Wt.disabled=!0,Gt.disabled=!0,Kt.accept=".swf";break;case"dos":Wt.disabled=!0,Gt.disabled=!0,Kt.accept=".jsdos, .zip";break;default:qt.value="emu",Wt.disabled=!1,Gt.disabled=!1,Kt.accept="*/*"}},n("startemu").onclick=()=>{var e,t;const n=null===(e=Kt.files)||void 0===e?void 0:e.item(0);if(null==n)return void o("Please choose a valid game ROM file.");const r=qt.value,s=new URLSearchParams("");if(s.set("name",n.name),s.set("type",r),s.set("url",URL.createObjectURL(n)),"emu"===r){
s.set("core",Wt.value);const e=null===(t=Gt.files)||void 0===t?void 0:t.item(0);null!=e&&s.set("bios",URL.createObjectURL(e))}i("/player.html?"+s.toString())}}{const Jt=n("game-name"),Yt=n("game-type"),Xt=n("game-file"),Zt=n("game-tags"),Qt=n("game-desc"),en=n("upload"),tn=n("upload-message");Yt.onchange=()=>{switch(Yt.value){case"html5":Xt.accept=".zip";break;case"flash":Xt.accept=".swf";break;case"dos":Xt.accept=".jsdos";break;default:Xt.accept="*/*"}},tn.onclick=()=>{tn.innerHTML="",
tn.style.display="none"},en.onclick=async()=>{var e;const t=Jt.value.replace(/\s+/g," ").trim();if(0===t.length)return void o("Game name must not be empty.");if(t.length>256)return void o("Game name must be less than 256 characters in length.");const n=null===(e=Xt.files)||void 0===e?void 0:e.item(0);if(null==n)return void o("Please choose a valid game file.");if(0===n.size)return void o("Uploading empty game files is not allowed.")
;if(n.size>25e6)return void o("Uploading files larger than 25MB is not supported currently.");if(null==L)return void o("Invalid session. Please refresh this page and try again.");const r=Qt.value.replace(/\s+/g," ").trim(),i=Zt.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",");if(i.length>300)o("Game tags list must be less than 300 characters long in total.");else if(r.length>5e3)o("Game description text must be less than 5000 characters in length.");else{
en.disabled=!0,tn.innerHTML="Processing...",tn.style.color="#808080",tn.style.display="block";try{await d(13,[L,t,Yt.value,i,r,await n.arrayBuffer()]),tn.innerHTML="\u2713Success!",tn.style.color="#008000",tn.style.display="block"}catch(e){tn.innerHTML="\u2715Error",tn.style.color="#ff0000",tn.style.display="block",o("Failed to upload the game. Message: "+e)}Jt.value="",Xt.value="",Zt.value="",Qt.value="",en.disabled=!1}}}{
const nn=n("picker"),rn=n("global"),on=n("friends"),sn=n("chatgpt"),an=n("msglist"),cn=n("history"),ln=n("channels"),dn=n("ufile"),un=n("messages"),hn=un.children,pn=n("channel-name"),fn=n("sendmsg"),mn=n("chat-btn"),gn=n("community-page");{const bn=n("chat"),yn=n("sidemenu"),vn=n("toggle");vn.onclick=()=>{"Close"===vn.title?(vn.title="Menu",bn.style.width="100%",yn.style.display="none"):(vn.title="Close",bn.removeAttribute("style"),yn.removeAttribute("style"))},x&&(vn.title="Menu",
bn.style.width="100%",yn.style.display="none")}{const wn=ln.children,kn=an.children;let En,Cn=!1;function _n({id:e,msg:n,uid:r,vip:i,user:s,icon:a,files:c}){const l=t.createElement("div");l.setAttribute("id",e);const d=t.createElement("div");switch(d.className="user",d.textContent=s,i){case 3:d.setAttribute("vip","gold");break;case 4:d.setAttribute("vip","diamond")}{const e=t.createElement("img");if(e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,
"string"!=typeof a){const t=URL.createObjectURL(new Blob([a],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}else e.src=a;null!=r&&(e.style.cursor=d.style.cursor="pointer",e.onclick=d.onclick=()=>{F(r).catch((e=>{o("Failed to open user profile. Message: "+e)}))}),l.appendChild(e)}{const e=t.createElement("div");if(e.appendChild(d),n.length>0){const r=t.createElement("span");r.textContent=n,e.appendChild(r)}
for(const{name:n,type:r,url:o}of c){{const r=t.createElement("a");r.rel="noopener nofollow",r.href=o,r.target="_blank",r.download="",r.textContent=n||"file",e.appendChild(r)}switch(r.split("/",2)[0]){case"image":{const n=t.createElement("img");n.src=o,n.alt="Attachment",n.width=500,n.height=500,n.loading="lazy",n.decoding="async",n.draggable=!1,e.appendChild(n)}break;case"audio":{const n=t.createElement("audio");n.src=o,n.muted=!1,n.preload="metadata",n.controls=!0,e.appendChild(n)}break
;case"video":{const n=t.createElement("video");n.src=o,n.muted=!0,n.width=500,n.height=500,n.autoplay=!0,n.controls=!0,e.appendChild(n)}}}l.appendChild(e)}return l}function Tn(e,t){if(En===e){const e=un.scrollHeight-un.clientHeight;un.appendChild(_n(t)),e===un.scrollTop&&un.scrollTo({behavior:"instant",left:0,top:un.scrollHeight})}}function An(e,t){if(En===e)for(const e of hn)if(e.getAttribute("id")===t){e.remove();break}}function xn(e,t,n){
if(En===e)for(const e of hn)if(e.getAttribute("id")===t){const r=e.querySelector("div>span");null!=r?r.textContent=n:o("Failed to update message: "+t);break}}async function Sn(){if(0===wn.length){dn.disabled=!0,fn.disabled=!0;try{const n=await d(22);for(const r of n)if("#"===r[0]){const e=t.createElement("span");e.textContent=r.slice(1),ln.appendChild(e)}else{const[n,i,s]=r.split(":",3),a=t.createElement("div");a.textContent=n,a.onclick=async()=>{var t;if(!Cn){Cn=!0;try{const n=await d(7,[En=i])
;e=null===(t=n[n.length-1])||void 0===t?void 0:t.id,un.innerHTML="";for(const e of n)un.prepend(_n(e));un.scrollTo({behavior:"instant",left:0,top:un.scrollHeight})}catch(e){return void o("Failed to initialize channel. Message: "+e)}for(const e of wn)e.removeAttribute("data-current");a.setAttribute("data-current","true"),pn.textContent=n,dn.style.display="f"===s?"block":"none",Cn=!1}},ln.appendChild(a)}}catch(e){return void o("Failed to load channel list. Message: "+e)}}let e;un.innerHTML="",
pn.innerHTML="Global",O.removeAllListeners("msg"),O.removeAllListeners("msgdel"),O.removeAllListeners("msgupd"),O.on("msg",Tn),O.on("msgdel",An),O.on("msgupd",xn);{const t=ln.querySelector("div");null!=t?(un.onscroll=async()=>{if(!Cn&&0===un.scrollTop){Cn=!0;try{const t=await d(7,[En,e]);if(t.length>0){e=t[t.length-1].id;const n=un.scrollHeight;for(const e of t)un.prepend(_n(e));un.scrollTo({behavior:"instant",left:0,top:un.scrollHeight-n})}}catch(e){o("Failed to fetch messages. Reason: "+e)}
Cn=!1}},fn.onkeydown=e=>{if("Enter"===e.key){if(e.preventDefault(),e.stopPropagation(),null==L)return void z.click();const t=fn.value.trim();if(t.length<1)return void o("Messages cannot be empty.");if(t.length>1e3)return void o("Messages cannot be longer than 1000 characters.");fn.value="",fn.disabled=!0,d(8,[L,En,t]).then((()=>{fn.disabled=!1})).catch((e=>{o("Failed to post text message. Message: "+e),fn.disabled=!1}))}},
t.click()):(ln.innerHTML="No public channels are available at this moment.",un.onscroll=null,fn.onkeydown=null)}fn.onfocus=e=>{e.preventDefault(),e.stopPropagation(),null==L&&z.click()},on.removeAttribute("data-current"),sn.removeAttribute("data-current"),an.removeAttribute("style"),cn.removeAttribute("style"),rn.setAttribute("data-current","true"),ln.style.display="block",dn.disabled=!1,fn.disabled=!1}async function jn(){if(null==L)return void z.click()
;if("string"!=typeof I)return void o("Internal error");const e=(e,i,s,a)=>{const c=t.createElement("div");c.setAttribute("data-user",i);{const e=t.createElement("img");e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1;{const t=URL.createObjectURL(new Blob([a],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}c.appendChild(e)}{const e=t.createElement("div");e.textContent=s,
c.appendChild(e)}return c.onclick=async()=>{if(!Cn){Cn=!0;try{n=(await d(28,[L,En=e])).reverse(),un.innerHTML="";for(const e of n.slice(0,r=20))un.prepend(_n(await d(29,[L,e])));un.scrollTo({behavior:"instant",left:0,top:un.scrollHeight})}catch(e){return void o("Failed to fetch messages. Reason: "+e)}for(const e of kn)e.removeAttribute("data-current");c.setAttribute("data-current","true"),pn.textContent=s,Cn=!1}},an.appendChild(c),c};if(0===kn.length){dn.disabled=!0,fn.disabled=!0;try{
const t=await d(27,L);for(const{id:n,type:r,users:o}of t)if("d"===r){if(1!==o.length)throw Error("Invalid user list for DM channel.");const t=o[0],{id:r,avatar:i}=await d(1,t);e(n,t,r,i)}}catch(e){return void o("Failed to load friends list. Message: "+e)}}let n,r=0;un.innerHTML="",pn.innerHTML="Friends",O.removeAllListeners("msg"),O.removeAllListeners("msgdel"),O.removeAllListeners("msgupd"),O.on("msg",Tn),O.on("msgdel",An),O.on("msgupd",xn);{const e=an.querySelector("div");null!=e&&e.click()}
un.onscroll=async()=>{if(!Cn&&0===un.scrollTop&&null!=n&&r<n.length){Cn=!0;try{const e=un.scrollHeight;for(const e of n.slice(r,r+=20))un.prepend(_n(await d(29,[L,e])));un.scrollTo({behavior:"instant",left:0,top:un.scrollHeight-e})}catch(e){o("Failed to fetch messages. Reason: "+e)}Cn=!1}},fn.onkeydown=async t=>{if("Enter"===t.key){t.preventDefault(),t.stopPropagation();const n=fn.value.trim();if(n.length<1)return void o("Messages cannot be empty.")
;if(n.length>1e3)return void o("Messages cannot be longer than 1000 characters.");if(null!=En){fn.value="",fn.disabled=!0;try{if(En.startsWith("tmp$")){const t=En.slice(4),{id:n,avatar:r}=await d(1,t);En=await d(30,[L,[I,t],"dm_channel"]);for(const e of kn)e.removeAttribute("data-current");e(En,t,n,r).setAttribute("data-current","true")}await d(8,[L,En,n])}catch(e){o("Failed to post text message. Reason: "+e)}}fn.disabled=!1}},rn.removeAttribute("data-current"),
sn.removeAttribute("data-current"),cn.removeAttribute("style"),ln.removeAttribute("style"),on.setAttribute("data-current","true"),an.style.display="block",dn.style.display="none",dn.disabled=!0,fn.disabled=!1}dn.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="*/*",e.multiple=!0,e.onchange=async()=>{const t=e.files;if(null!=t&&t.length>0){if(t.length>10)return void o("Uploading more than 10 files at once is not supported.");dn.disabled=!0,fn.disabled=!0;try{const e=[]
;for(const n of t){if(n.size<1)throw Error("Empty files are not allowed.");if(n.size>1e7)throw Error("Files larger than 10MB are not supported.");e.push({name:n.name,attachment:await n.arrayBuffer()})}await d(12,[L,En,e])}catch(e){o("Failed to upload file. Message: "+e)}dn.disabled=!1,fn.disabled=!1}},e.click()},rn.onclick=e=>{e.preventDefault(),e.stopPropagation(),Sn()},on.onclick=e=>{e.preventDefault(),e.stopPropagation(),jn()},mn.onclick=()=>{null!=H&&H()
;for(const e of V)e.removeAttribute("data-current");Sn().then((()=>{q.checked=!1,mn.setAttribute("data-current","true"),gn.setAttribute("data-current","true")}))},R=async e=>{if(null!=L){await jn(),null!=H&&H();for(const e of V)e.removeAttribute("data-current");q.checked=!1,mn.setAttribute("data-current","true"),gn.setAttribute("data-current","true");{const t=an.querySelector('div[data-user="'+e+'"]');if(null!=t)return void t.click()}pn.textContent=(await d(1,e)).id,En="tmp$"+e}else z.click()}}{
const Ln=cn.children;let In=null;const On=JSON.parse(j.get("__chats")||"[]");function Dn({role:e,text:n}){const r=t.createElement("div");{const n=t.createElement("img");n.width=32,n.height=32,n.loading="lazy",n.decoding="async",n.draggable=!1,"u"===e?(n.src="res/user.svg",n.alt="User"):(n.src="res/bot.svg",n.alt="Assistant"),r.appendChild(n)}{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}return un.appendChild(r),r}function Mn(e){const n=e.title
;if("string"!=typeof n)throw Error("Invalid chat object");const r=t.createElement("div");r.onclick=()=>{for(const e of Ln)e.removeAttribute("data-current");r.setAttribute("data-current","true"),un.innerHTML="",pn.textContent=n;for(const t of In=e.msgs)Dn(t);un.scrollTo({behavior:"instant",left:0,top:un.scrollHeight})};{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}{const n=t.createElement("button");n.type="button",n.title="Delete",n.onclick=t=>{t.preventDefault(),
t.stopPropagation();const n=On.indexOf(e,0);n>=0&&(In=null,r.remove(),On.splice(n,1),un.innerHTML="",j.set("__chats",JSON.stringify(On,void 0,0)))},r.appendChild(n)}cn.appendChild(r)}function Pn(){fn.disabled=!1,O.removeAllListeners("gptres"),O.removeAllListeners("gptend"),O.removeAllListeners("gpterr")}n("newchat").onclick=()=>{for(const e of Ln)e.removeAttribute("data-current");In=null,un.innerHTML="",pn.innerHTML="New chat"},sn.onclick=()=>{for(const e of Ln)e.removeAttribute("data-current")
;if(In=null,un.innerHTML="",pn.innerHTML="New chat",O.removeAllListeners("msg"),O.removeAllListeners("msgdel"),O.removeAllListeners("msgupd"),Ln.length<2)for(const e of On)Mn(e);un.onscroll=null,fn.onfocus=null,fn.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=fn.value.trim();if(t.length<1)return void o("Messages cannot be empty.");if(t.length>8e3)return void o("Messages cannot be longer than 8000 characters.");if(fn.value="",fn.disabled=!0,null==In){const e={
title:t.slice(0,100),msgs:In=[]};Mn(e),On.push(e)}const n={role:"u",text:t};Dn(n),In.push(n);const r={role:"a",text:"Processing..."},i=Dn(r),s=i.lastElementChild;O.on("gptres",(e=>{s.textContent=r.text=e,s.scrollIntoView({block:"nearest",inline:"nearest",behavior:"instant"})})),O.on("gptend",(()=>{Pn(),In.push(r),j.set("__chats",JSON.stringify(On,void 0,0))})),O.on("gpterr",(e=>{Pn(),In.pop(),i.remove(),o("Failed to process the request. Message: "+e)})),O.emit("gptreq",In)}},
rn.removeAttribute("data-current"),on.removeAttribute("data-current"),an.removeAttribute("style"),ln.removeAttribute("style"),sn.setAttribute("data-current","true"),cn.style.display="block",dn.style.display="none",dn.disabled=!0,fn.disabled=!1}}n("emoji").onclick=()=>{if("block"!==nn.style.display){if(null==nn.firstElementChild){const e=new Ms({locale:"POSIX",emojiVersion:1e3});e.addEventListener("emoji-click",(e=>{e.preventDefault(),e.stopPropagation();const t=e.detail.unicode
;null!=t&&fn.setRangeText(t,fn.selectionStart||0,fn.selectionEnd||0,"end")})),nn.appendChild(e)}nn.style.display="block"}else nn.style.display="none"},n("discord").onclick=()=>{const t=e.open(void 0,"_blank","");null!=t?(t.stop(),t.focus(),t.location.replace("https://discord.gg/djdH3kVd4v")):o("Please allow popups in your browser settings and try again.")}}const z=n("accn-btn"),$=n("chat-profile"),V=t.querySelectorAll("#nav-bar>button, #content>div:not(#footer), #unbl-content"),q=n("side-menu")
;{const Bn=n("home-btn"),Nn=n("unbl-btn"),Rn=n("apps-btn"),Un=n("settings"),Fn=n("home-page"),Hn=n("site-blocked-page"),zn=n("services-page"),$n=n("uploadgames-page"),Vn=n("accountinfo-page"),qn=n("profile-page"),Wn=n("settings-page");n("logo").onclick=Bn.onclick=()=>{null!=H&&H();for(const e of V)e.removeAttribute("data-current");q.checked=!1,Bn.setAttribute("data-current","true"),Fn.setAttribute("data-current","true")},Rn.onclick=()=>{null!=H&&H()
;for(const e of V)e.removeAttribute("data-current");q.checked=!1,Rn.setAttribute("data-current","true"),zn.setAttribute("data-current","true")},Nn.onclick=()=>{null!=H&&H();for(const e of V)e.removeAttribute("data-current");q.checked=!1,Nn.setAttribute("data-current","true"),Hn.setAttribute("data-current","true")},n("ug").onclick=()=>{null!=H&&H();for(const e of V)e.removeAttribute("data-current");q.checked=!1,$n.setAttribute("data-current","true")},
n("chat-login").onclick=$.onclick=z.onclick=()=>{null!=H&&H();for(const e of V)e.removeAttribute("data-current");q.checked=!1,z.setAttribute("data-current","true"),Vn.setAttribute("data-current","true")},Un.onclick=e=>{if(e.preventDefault(),e.stopPropagation(),null!=H&&H(),Wn.hasAttribute("data-current")){for(const e of V)e.removeAttribute("data-current");Bn.setAttribute("data-current","true"),Fn.setAttribute("data-current","true")}else{for(const e of V)e.removeAttribute("data-current")
;Wn.setAttribute("data-current","true")}q.checked=!1};{const Gn=n("avatar"),Kn=n("userid"),Jn=n("pf-games"),Yn=n("af"),Xn=n("dm");F=async e=>{const n=(e=await d(1,e)).uid;if("string"!=typeof n||n.length<4)throw Error("Failed to parser server response.");null!=H&&H();for(const e of V)e.removeAttribute("data-current");q.checked=!1,qn.setAttribute("data-current","true"),H=()=>{H=null,f.replaceState(void 0,"","/"),_.setAttribute("content",""),T.setAttribute("href","https://nettleweb.com/")};{
const t="/"+n;f.replaceState(void 0,"",t),_.setAttribute("content","@"+(Kn.textContent=e.id)+"'s profile at NettleWeb; Join NettleWeb today to play and share online games within our community!"),T.setAttribute("href","https://nettleweb.com"+t)}switch(e.vip){case 3:Kn.setAttribute("vip","gold");break;case 4:Kn.setAttribute("vip","diamond");break;default:Kn.removeAttribute("vip")}Yn.onclick=()=>{o("Function not yet implemented.")},Xn.onclick=()=>{o("Function not yet implemented.")},
Jn.innerHTML="",Jn.removeAttribute("style");for(const e of N)if(e.user===n){const{name:n,prev:r,date:o}=e,i=t.createElement("a");i.href=o>0?"/"+o.toString(36):"#",i.title="Play "+n,i.target="_self",i.className="game",i.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),U(e))},i.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,i.appendChild(e)}
switch(e.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",i.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",i.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",i.appendChild(e)}break;default:i.style.backgroundImage='url("/res/preview.svg")'}Jn.appendChild(i)}null==Jn.firstElementChild&&(Jn.style.overflow="unset",
Jn.innerHTML="This user has not uploaded any games yet.");{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",endings:"native"}));Gn.src=t,await Gn.decode(),URL.revokeObjectURL(t)}}}("/"===m||m.indexOf(".",0)>=0||await(async()=>{if(m.indexOf("/",1)<0){const e=m.slice(1);if(e.length>5&&e.length<12){const t=parseInt(e,36);if(Number.isSafeInteger(t)&&t>0)for(const e of N)if(e.date===t)return await U(e),!1}if(e.length<50)try{return await F(e),!1}catch(e){
return o("Failed to open user profile. Message: "+e),!0}}else switch(m.slice(0,3)){case"/g/":case"/d/":case"/e/":{const e=parseInt(m.slice(3),36);if(Number.isSafeInteger(e)&&e>0)for(const t of N)if(t.date===e)return await U(t),!1}break;case"/u/":{const e=m.slice(3);if(e.length<50)try{return await F(e),!1}catch(e){return o("Failed to open user profile. Message: "+e),!0}}}return!0})())&&(f.replaceState(void 0,"","/"),T.setAttribute("href","https://nettleweb.com/")),
Object.defineProperty(e,"history",{value:Object.freeze(Object.setPrototypeOf({get state(){return null},get length(){return 0},get scrollRestoration(){return"auto"},go:()=>{},back:()=>{},forward:()=>{},pushState:()=>{},replaceState:()=>{}},null)),writable:!1,enumerable:!0,configurable:!1}),n("loading").remove(),n("content").style.display="block"}{const Zn=await l("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7505521340110301");if(null!=Zn&&Zn.length>0)try{
Function("arguments","globalThis","window","frames","self","document",Zn).call(e,void 0,e,e,e,e,t)}catch(er){}else o("You are using an ad blocker. Please disable it to support this website's development.");const Qn=window.adsbygoogle||(window.adsbygoogle=[]);for(const tr of t.querySelectorAll("ins.adsbygoogle")){tr.setAttribute("data-ad-client","ca-pub-7505521340110301"),tr.setAttribute("data-ad-format","auto"),tr.setAttribute("data-full-width-responsive","true");try{Qn.push(1)}catch(nr){}}}{
const rr=t.createElement("script");rr.type="text/javascript",rr.src="https://cse.google.com/cse.js?cx=6505c81d738124627",rr.async=!0,rr.defer=!0,C.appendChild(rr)}{const or=t.createElement("script");or.type="text/javascript",or.src="lib/desmos/calculator.js",or.async=!0,or.defer=!0,or.onload=()=>{e.Desmos.GraphingCalculator(n("calc-container"))},C.appendChild(or)}{const ir=async()=>{z.innerHTML="My Account",n("ac-prof").style.display="block",n("chat-login").remove(),n("login-dialog").remove()
;const r=n("ac-name"),i=n("ac-email"),s=n("ac-un"),a=n("ac-edit"),c=n("ac-link"),l=n("ac-name-edit"),u=n("ac-email-edit"),h=n("ch-avatar"),p=h.firstElementChild,f=t.createElement("img");f.alt="Avatar",f.width=40,f.height=40,f.loading="eager",f.decoding="sync",f.draggable=!1,$.appendChild(f);const m=t.createElement("div");m.className="user",$.appendChild(m),$.style.display="block";const g=await d(2,L),b=g.id,y=g.uid
;if("string"!=typeof b||b.length<4||"string"!=typeof y||y.length<2)o("Error: Server response parse error.");else{switch(r.textContent=g.name||"Not set",i.textContent=g.email||"Not set",s.textContent=b,m.textContent=b,n("ac-uid").textContent=y,g.vip){case 3:n("ac-membership").textContent="Gold \u{1f451}",s.setAttribute("vip","gold"),m.setAttribute("vip","gold");break;case 4:n("ac-membership").textContent="Diamond \u{1f48e}",s.setAttribute("vip","diamond"),m.setAttribute("vip","diamond");break
;default:n("ac-membership").textContent="None"}{const e=URL.createObjectURL(new Blob([g.avatar],{type:"image/jpeg",endings:"native"}));p.src=f.src=e,await p.decode(),await f.decode(),URL.revokeObjectURL(e)}{const e=n("ac-games");for(const n of N)if(n.user===y){const{name:r,prev:o,date:i}=n,s=t.createElement("a");s.href=i>0?"/"+i.toString(36):"#",s.title="Play "+r,s.target="_self",s.className="game",s.onclick=e=>{e.ctrlKey||(e.preventDefault(),e.stopPropagation(),U(n))},
s.style.backgroundImage=null!=o?'url("'+o+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(r)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=r,s.appendChild(e)}switch(n.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",s.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",s.appendChild(e)}break;case"dos":{const e=t.createElement("span")
;e.textContent="Dos",e.style.background="#0000ff",s.appendChild(e)}break;default:s.style.backgroundImage='url("/res/preview.svg")'}e.appendChild(s)}null==e.firstElementChild&&(e.style.overflow="unset",e.innerHTML="You have not uploaded any games yet.")}h.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="image/*",e.onchange=async()=>{var t;const n=null===(t=e.files)||void 0===t?void 0:t.item(0);if(null!=n){const e=URL.createObjectURL(n),t=new Image(512,512);t.src=e,
t.loading="eager",t.decoding="sync";try{await t.decode(),URL.revokeObjectURL(e)}catch(e){return void o("Error: Failed to decode the image file.")}const r=Math.min(t.naturalWidth,t.naturalHeight),i=Math.min(r,512),s=new OffscreenCanvas(i,i),a=s.getContext("2d",{alpha:!1});if(null==a)throw Error("Internal Error: Canvas context is null before accessing.");a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.fillStyle="#ffffff",a.fillRect(0,0,i,i),a.drawImage(t,0,0,r,r,0,0,i,i);try{
const e=await s.convertToBlob({type:"image/jpeg",quality:100});await d(4,[L,await e.arrayBuffer()]);const t=URL.createObjectURL(e);p.src=f.src=t,await p.decode(),await f.decode(),URL.revokeObjectURL(t)}catch(e){o("Failed to upload the image file. Message+ "+e)}}},e.click()},a.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=s.innerHTML,n.minLength=4,n.maxLength=20,n.spellcheck=!1,n.placeholder="Username",n.autocomplete="off",e.appendChild(n)
;const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const i=t.createElement("button");i.type="button",i.title="Cancel",i.className="cross",e.appendChild(i),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim().toLowerCase();t.length<4||t.length>20?o("Username must be between 4 and 20 characters long."):/^[\-a-z0-9]+$/.test(t)?d(3,[L,t]).then((()=>{e.replaceWith(s),s.textContent=t,
m.textContent=t,a.removeAttribute("style")})).catch((e=>{o("Error: Failed to change username. Message: "+e)})):o("Username must contain only hyphens, 0-9, lowercase a-z")},i.onclick=()=>{e.replaceWith(s),a.removeAttribute("style")},a.style.display="none",s.replaceWith(e),n.select()},c.onclick=()=>{const n=t.createElement("span"),r=e.origin+"/"+g.uid;n.textContent=r,c.replaceWith(n),navigator.clipboard.writeText(r)},l.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input")
;n.type="text",n.value=r.innerHTML,n.minLength=2,n.maxLength=30,n.spellcheck=!1,n.placeholder="Name",n.autocomplete="off",e.appendChild(n);const i=t.createElement("button");i.type="button",i.title="Save",i.className="tick",e.appendChild(i);const s=t.createElement("button");s.type="button",s.title="Cancel",s.className="cross",e.appendChild(s),n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},i.onclick=()=>{const t=n.value.trim()
;t.length<2||t.length>30?o("Name must be between 2 and 30 characters long."):d(20,[L,t]).then((()=>{e.replaceWith(r),r.textContent=t,l.removeAttribute("style")})).catch((e=>{o("Error: Failed to change name. Message: "+e)}))},s.onclick=()=>{e.replaceWith(r),l.removeAttribute("style")},l.style.display="none",r.replaceWith(e),n.select()},u.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="email",n.value=i.innerHTML,n.minLength=6,n.maxLength=320,n.spellcheck=!1,
n.placeholder="Email",n.autocomplete="off",e.appendChild(n);const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const s=t.createElement("button");s.type="button",s.title="Cancel",s.className="cross",e.appendChild(s),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{const s=n.value.trim().toLowerCase()
;s.length<6||s.length>320||s.indexOf("@",1)<0?o("Please provide a valid email address."):d(19,[L,s]).then((()=>{{const n=t.createElement("div");n.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",e.prepend(n)}n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.placeholder="6-digit verification code",n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim()
;6===t.length&&/^\d+$/.test(t)?d(18,[L,t]).then((()=>{e.replaceWith(i),i.textContent=s,u.removeAttribute("style")})).catch((e=>{o("Failed to verify your email. Message: "+e)})):o("The code provided must have exactly 6 digits.")}})).catch((e=>{o("Error: Failed to update email address. Message: "+e)}))},s.onclick=()=>{e.replaceWith(i),u.removeAttribute("style")},u.style.display="none",i.replaceWith(e),n.select()},n("account-settings").style.display="block"}};{const fr=n("cp");fr.onclick=()=>{
const e=t.createElement("div");{const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:10px 0px;padding:5px;"),n.textContent="Notice: If your account was created with your Google account and does not have a password, set the current password field to 'CHANGEME!'.",e.appendChild(n)}const n=t.createElement("input");n.type="password",n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Current password",
n.autocomplete="off",e.appendChild(n);const r=t.createElement("input");r.type="password",r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="New password",r.autocomplete="off",e.appendChild(r);const i=t.createElement("input");i.type="password",i.minLength=8,i.maxLength=30,i.spellcheck=!1,i.placeholder="Confirm password",i.autocomplete="off",e.appendChild(i);const s=t.createElement("button");s.type="button",s.title="Change",s.className="tick",e.appendChild(s)
;const a=t.createElement("button");a.type="button",a.title="Cancel",a.className="cross",e.appendChild(a),s.onclick=()=>{const t=n.value;if(t.length<8||t.length>30)return void o("The current password must have 8 to 30 characters.");const s=r.value;s.length<8||s.length>30?o("The new password must have 8 to 30 characters."):t!==s?s===i.value?d(9,[L,t,s]).then((()=>{e.replaceWith(fr)})).catch((e=>{o("Error: Failed to change password. Message: "+e)
})):o("The confirm password does not match the new password."):o("The new password must be different from the current password.")},a.onclick=()=>{e.replaceWith(fr)},fr.replaceWith(e)}}if(n("so").onclick=()=>{j.delete("__secrets_"),setTimeout((()=>p.reload()),200)},n("da").onclick=()=>{o("Error: Operation not permitted.")},null!=L){const mr=await new Promise((e=>{const t=r=>{O.off("lr",t),O.off("le",n),e(null),I=r},n=r=>{O.off("lr",t),O.off("le",n),e(r)};O.on("lr",t),O.on("le",n),
O.emit("login",L)}));if(null==mr)return void await ir();o("Failed to validate login token. Please login again. Message: "+mr),L=null}const sr=n("login-dialog");let ar,cr,lr;function dr(){sr.style.display="none",sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Login",sr.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=cr||"",e.required=!0,e.minLength=4,e.maxLength=320,e.spellcheck=!1,e.placeholder="Username or email",e.autocomplete="off",sr.appendChild(e)
;const n=t.createElement("input");n.type="password",n.value=lr||"",n.required=!0,n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Password",n.autocomplete="off",sr.appendChild(n);const r=t.createElement("button");r.type="button",r.className="pri-button",r.textContent="Login",sr.appendChild(r);const i=t.createElement("div");i.tabIndex=0,i.textContent="Register",sr.appendChild(i);const s=t.createElement("div");s.tabIndex=0,s.textContent="Forgot password",sr.appendChild(s)
;const a=t.createElement("div");a.tabIndex=0,a.textContent="Sign in with Google",sr.appendChild(a),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(cr=e.value=t)},n.onblur=()=>{const e=n.value;e.length>0&&(lr=e)},r.onclick=()=>{const t=cr=e.value.trim().toLowerCase();if(t.indexOf("@",1)<0){if(t.length<4||t.length>20)return void o("Username must be between 4 and 20 characters long.")
;if(!/^[\-a-z0-9]+$/.test(t))return void o("Username must contain only hyphens, 0-9, lowercase a-z.")}else if(t.length<6||t.length>320)return void o("Invalid email address. (Usernames should not contain a '@' symbol)");const r=lr=n.value;r.length<8||r.length>30?o("Password must be between 8 and 30 characters long."):d(10,[t,r]).then((e=>{"string"==typeof e?(j.set("__secrets_",L=e),O.emit("login",L),ir()):o("Error: Invalid token received.")})).catch((e=>{
o("Failed to retrieve login token. Message: "+e)}))},i.onclick=ur,s.onclick=hr,a.onclick=pr,sr.style.display="block"}function ur(){sr.style.display="none",sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Register",sr.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=cr||"",e.required=!0,e.minLength=4,e.maxLength=20,e.spellcheck=!1,e.placeholder="Username",e.autocomplete="off",sr.appendChild(e);const n=t.createElement("input");n.type="email",n.value=ar||"",
n.required=!0,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",sr.appendChild(n);const r=t.createElement("input");r.type="password",r.value=lr||"",r.required=!0,r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="Password",r.autocomplete="off",sr.appendChild(r);const i=t.createElement("input");i.type="password",i.value="",i.required=!0,i.minLength=8,i.maxLength=30,i.spellcheck=!1,i.placeholder="Confirm password",i.autocomplete="off",
sr.appendChild(i);const s=t.createElement("button");s.type="button",s.className="pri-button",s.textContent="Register",sr.appendChild(s);const a=t.createElement("div");a.tabIndex=0,a.textContent="Login",sr.appendChild(a);const c=t.createElement("div");c.tabIndex=0,c.textContent="Sign in with Google",sr.appendChild(c),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(cr=e.value=t)},n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(ar=n.value=e)},r.onblur=()=>{
const e=r.value;e.length>0&&(lr=e)},s.onclick=()=>{const s=cr=e.value.trim().toLowerCase();if(s.length<4||s.length>20)return void o("The username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(s))return void o("The username must contain only hyphens, lowercase a-z and 0-9.");const a=ar=n.value.trim().toLowerCase();if(a.length<6||a.length>320||a.indexOf("@",1)<0)return void o("Please provide a valid email.");const l=lr=r.value
;l.length<8||l.length>30?o("The password must be between 8 and 30 characters long."):l===i.value?d(11,[s,l,a]).then((()=>{sr.style.display="none",sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Verify Email",sr.appendChild(e)}{const e=t.createElement("span");e.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",sr.appendChild(e)}const e=t.createElement("input");e.type="text",e.value="",e.required=!0,e.minLength=6,
e.maxLength=6,e.spellcheck=!1,e.placeholder="6-digit verification code",e.autocomplete="off",sr.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Verify",sr.appendChild(n);{const e=t.createElement("span")
;e.textContent="Notice: If you are using a managed email address (ie. school or work) and did not receive a code in your inbox after several attempts, the code is likely to be blocked by your administrator. In this case, using a personal account could help.",sr.appendChild(e)}sr.appendChild(c),e.onblur=()=>{const t=e.value.trim();t.length>0&&(e.value=t)},n.onclick=()=>{const t=e.value.trim();6===t.length&&/^\d+$/.test(t)?d(17,[s,t]).then((e=>{j.set("__secrets_",L=e),O.emit("login",L),ir()
})).catch((e=>{o("Operation failed. Message: "+e)})):o("The code provided must have exactly 6 digits.")},sr.style.display="block"})).catch((e=>{o("Operation failed. Message: "+e)})):o("The confirm password does not match.")},a.onclick=dr,c.onclick=pr,sr.style.display="block"}function hr(){sr.style.display="none",sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Reset Password",sr.appendChild(e)}const e=t.createElement("input");e.type="email",e.value=ar||"",e.required=!0,
e.minLength=6,e.maxLength=320,e.spellcheck=!1,e.placeholder="Email",e.autocomplete="off",sr.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Continue",sr.appendChild(n);const r=t.createElement("div");r.tabIndex=0,r.textContent="Login",sr.appendChild(r);const i=t.createElement("div");i.tabIndex=0,i.textContent="Register",sr.appendChild(i);const s=t.createElement("div");s.tabIndex=0,s.textContent="Sign in with Google",sr.appendChild(s),
e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(ar=e.value=t)},n.onclick=()=>{const n=ar=e.value.trim().toLowerCase();n.length<6||n.length>320||n.indexOf("@",1)<0?o("Please provide a valid email."):d(21,n).then((()=>{sr.style.display="none",sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Reset Password",sr.appendChild(e)}{const e=t.createElement("span");e.textContent="Please check your inbox and follow the instructions on the email.",sr.appendChild(e)}
sr.appendChild(r),sr.appendChild(i),sr.appendChild(s),sr.style.display="block"})).catch((e=>{o(e+"")}))},r.onclick=dr,i.onclick=ur,s.onclick=pr,sr.style.display="block"}function pr(){const t=new URL("https://accounts.google.com/o/oauth2/v2/auth");{const n=t.searchParams;n.set("client_id","176227430389-qkdboctmfhe9jnvnk2vmarafc5p8amuf.apps.googleusercontent.com"),n.set("redirect_uri",e.origin+"/auth.html"),n.set("response_type","token"),n.set("state","12"),n.set("scope","email profile"),
n.set("include_granted_scopes","true"),n.set("enable_granular_consent","true")}p.replace(t)}{const gr=async e=>{if(0!==(e=new URLSearchParams(e).get("access_token")||"").length){try{e=await d(0,e),j.set("__secrets_",L=e),O.emit("login",L)}catch(e){return void o("Failed to retrieve login tokens. Message: "+e)}await ir()}else o("Error: Invalid access token received.")},br=j.get("_cre_");null==br?(dr(),e.addEventListener("message",(t=>{if(t.origin===e.origin){const e=t.data
;"string"==typeof e&&e.length>0&&gr(e)}}),{once:!1,passive:!0})):(await gr(br),j.delete("_cre_"))}}})(window)})();